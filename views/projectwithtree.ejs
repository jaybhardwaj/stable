<!DOCTYPE html>
<html lang="en">

<head>
    <% include ./partials/head %>

<style>
/******/



#projectDetailModal input {
    width:100% !important;
}
.dataTables_filter, .dataTables_length {
     display: none;
    }
.glyphicon-ok-circle{
  color:green!important;
 }

.scrolldiv {
    min-height: 518px;
    overflow-y: scroll;
}
.active{
  background-color:transparent;
}
.tree li {
    width:200px;
}
tr{
  width: 100%;
}

a{
  cursor:pointer;
  color: #171616;
  font-size: 12px;
}
.tree ul {
    list-style: none outside none;
}
.tree li a {
    line-height: 25px;
}
.tree > ul > li > a {
    color: #3B4C56;
    display: block;
    font-weight: normal;
    position: relative;
    text-decoration: none;
}
.tree li.parent > a {
    padding: 0 0 0 28px;
    color: black;
    font-size: 12px;
}
.tree li.parent > a:before {
    background-image: url("../img/pluss.png");
    background-position: 25px center;
     content: ""; 
    display: block;
    height: 21px;
    left: 0;
    position: absolute;
    top: 2px;
    vertical-align: middle;
    width: 23px;
}
.tree ul li.active > a:before {
   background-image: url("../img/minus_round.png");
   background-position: 0px center;
     content: ""; 
    display: block;
    height: 16px;
    left: 0;
    position: absolute;
    top: 2px;
    vertical-align: middle;
    width: 16px;
  /*background-color: white;
    background-position: 0 center;*/
}
.tree ul li ul {
    border-left: 1px solid black;
    display: none;
    margin: 0 0 0 8px;
  /*overflow: hidden;*/
    padding: 0 0 0 25px;
}
.tree ul li ul li {
    position: relative;
}

/*new*/
.tree ul li ul li ul li ul li{
    position: relative;
}

.tree ul li ul li ul li ul{
    border-left: 1px solid black;
    display: none;
    margin: 0 0 0 12px;
  /*overflow: hidden;*/
    padding: 0 0 0 25px;
}

.tree ul li ul li ul li ul li:before {
    border-bottom: 1px dashed black;
    content: "";
    left: -20px;
    position: absolute;
    top: 12px;
    width: 15px;
}
/*end*/
.tree ul li ul li:before {
    border-bottom: 1px dashed black;
    content: "";
    left: -20px;
    position: absolute;
    top: 12px;
    width: 15px;
}
#wrapper {
    margin: 0 auto;
    width: 300px;
}
</head>
</style>
<script type="text/javascript">
function handleClick(elem){
      if(elem.value ==2){
        $(".chosen-select1").chosen();
      }
      if(elem.value ==3){
        $(".chosen-select2").chosen();
      }
  }
var currentprojname=[];
var currentwbsname=[];
var projname=[];
var wbsprojname=[];
var pstartdate=[];
var pendDate=[];
var wstartdate=[];
var wendDate=[];
var projectSdate='';
var projectEdate='';
var wbsSdate='';
var wbsEdate='';
  $( document ).ready( function( ) {
    $(".chosen-select").chosen();
    if(<%=clientflag%>==1){
    projectStatus(1);
     document.getElementById("actproject").checked = true;
  }
    else{
      projectStatus(0);
       document.getElementById("actprojectin").checked = true;
    }
    setTimeout(function(){ 
        $( '.tree li' ).each( function() {
            if( $( this ).children( 'ul' ).length > 0 ) {
                $( this ).addClass( 'parent' );     
            }
        });
        
        $( '.tree li.parent > a' ).click( function( ) {
            $( this ).parent().toggleClass( 'active' );
            $( this ).parent().children( 'ul' ).slideToggle( 'fast' );
        });
        
        $( '#all' ).click( function() {
          
          $( '.tree li' ).each( function() {
            $( this ).toggleClass( 'active' );
            $( this ).children( 'ul' ).slideToggle( 'fast' );
          });
        });
        
        $( '.tree li' ).each( function() {
            $( this ).toggleClass( 'active' );
            $( this ).children( 'ul' ).slideToggle( 'fast' );
        });
        }, 1000);
        setTimeout(function(){  
    $('#all').click();   }, 1500);


          $('.se-pre-con').fadeOut('slow');

           $("#cabbname").focusout(function(){

                  
                    $('#ccode').val($('#cname').val().slice(0,3)+'_'+$(this).val());   
                     
                 });

              var oTable = $("#homeTable").dataTable({
                           
                            "bLengthChange":false,
                            "paging": false,
                            "binfo":false,
                            "bDestroy": true,

                            "aoColumnDefs": [{
                                "bSortable": false,
                                "aTargets": [-1]
                            }],
                            "autoWidth": false,
                            "columns": [{
                                "width": "10%"
                            },  {
                                "width": "10%"
                            }]
                        });
                 var oTable = $("#ashomeTable").dataTable({
                           
                            "bLengthChange":false,
                            "paging": false,
                            "binfo":false,
                            "bDestroy": true,

                            "aoColumnDefs": [{
                                "bSortable": false,
                                "aTargets": [-1]
                            }],
                            "autoWidth": false,
                            "columns": [{
                                "width": "10%"
                            },  {
                                "width": "10%"
                            }]
                        });
                    var oTable = $("#wshomeTable").dataTable({
                           
                            "bLengthChange":false,
                            "paging": false,
                            "binfo":false,
                            "bDestroy": true,

                            "aoColumnDefs": [{
                                "bSortable": false,
                                "aTargets": [-1]
                            }],
                            "autoWidth": false,
                            "columns": [{
                                "width": "10%"
                            },{
                                "width": "10%"
                            },{
                                "width": "10%"
                            },{
                                "width": "10%"
                            },{
                                "width": "10%"
                            },  {
                                "width": "10%"
                            }]
                        });
                      

                       otableclint=$('#client-contact-table').dataTable({
               'iDisplayLength': 10,
                "order":[],
                "bDestroy": true, 
                "info":false,
            });

                              $("#searchbox").keyup(function() {
        oTable.fnFilter(this.value);
      });
     /* $('#pclient').tagger({
        "fieldWidth":"13em"
      });*/  
      /*$('#ptech').tagger({
        "fieldWidth":"13em"
      }); */
     /* $('#presource').tagger({
        "fieldWidth":"13em"
      });*/
      //$("#presource").searchableOptionList();

     /* $('#presource').tagger({
        "fieldWidth":"13em"
      });*/

      /*$('#pcomplexity').tagger({
        "fieldWidth":"13em"
      });*/
     /* $('#pcommercialhead').tagger({
        "fieldWidth":"13em"
      });
      $('#paccounthead').tagger({
        "fieldWidth":"13em"
      });

      $('#pmanager').tagger({
        "fieldWidth":"13em"
      });

      /* $('#ccontact').tagger({
        "fieldWidth":"13em"
      });*/

  
  /*$('#plocation').tagger({
        "fieldWidth":"13em"
      });*/

  $("input[name=pstatus][value=" + 1 + "]").prop('checked', true);
  $("input[name=isBillable][value=" + 1 + "]").prop('checked', true);
  $("input[name=ptype][value=" + 1 + "]").prop('checked', true);
  $("input[name=pclient][value=" + 0 + "]").prop('checked', true);
  $('.project-img').addClass('active');
  //$("#pcomplexity").prop("selectedIndex", -1);

if( '<%=flag%>'=='1'){
         <%if(name.length){%>
           //$("input[name=ptype][value=<%=name[0].ptype%>]").prop('checked', true);
           $("input[name=pstatus][value=<%=name[0].pstatus%>]").prop('checked', true);
           $("input[name=isBillable][value=<%=name[0].isBillable%>]").prop('checked', true);

           $('#pcomplexity').val('<%=name[0].pcomplexity%>');
            $('#planReq').val('<%=name[0].isPlanReq%>');


            if ('<%=name[0].assigntoall%>' == '1') {
                        $('#assign').val('<%=name[0].assigntoall%>');
                        $('#presourceDiv').addClass('hide');
                         $('#resr').addClass('hide');
                    } else {
                     
                        $("#assign").val('<%=name[0].assigntoall%>');
                         $('#presourceDiv').removeClass('hide');
                         $('#resr').removeClass('hide');
                    }
 //$('#completed').val('<%=name[0].completed%>');



/*if('<%=name[0].projectTitle%>'=='DummyProject'){
        $('#idpname').attr('disabled',true);
      }*/


      if ('<%=name[0].ptype%>' == null) {
                        //$("#wbslocation").prop("selectedIndex", -1);
                        $('#ptype1').val(0);
                    } else {
                        $('#ptype1').val('<%=name[0].ptype%>');
                    }
      if ('<%=name[0].category%>' == null) {
          //$("#wbslocation").prop("selectedIndex", -1);
          $('#pcat').val(0);
      } else {
          $('#pcat').val('<%=name[0].category%>');
      }
      

    <%}%>

 }
  $("#datepicker").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepicker1").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepicker2").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepicker3").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepickerw").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepickerw1").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepickerw2").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#datepickerw3").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#asdatepicker").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
  $("#asdatepicker1").datetimepicker({timepicker:false,format:'m/d/y',scrollMouse: false,scrollInput: false});
 
if( '<%=flag%>'=='1'){
getSelectedOptions($('#pclient').val());

}

    $('#selectAll').click( function() {
              var string1="<select class='form-text-box chosen-select1' name='presource' multiple='multiple' id='presource'><option value=0 disabled>Select </option>" ;

                   <% for(var i=0;i<resource.length;i++) {%>
                
                            string1+="<option value='<%=resource[i].id%>' selected><%=resource[i].name%></option>"  ;           
                       <%}%>
              string1+="</select>";
              console.log(string1);
              $("#presourceDiv").html(string1);
              $(".chosen-select1").chosen();
                   /*$('#presource').select2({
                    allowClear: true,
                    "fieldWidth":"13em"
                      });*/ 
    });

    $('#selectNone').click( function() {
              var string1="<select class='form-text-box chosen-select1' name='presource' multiple='multiple' id='presource'><option value=0 disabled>Select </option>" ;

                   <% for(var i=0;i<resource.length;i++) {%>
                
                            string1+="<option value='<%=resource[i].id%>' ><%=resource[i].name%></option>"  ;           
                       <%}%>
              string1+="</select>";
              console.log(string1);
              $("#presourceDiv").html(string1);
              $(".chosen-select1").chosen();
                  /* $('#presource').select2({
                    "fieldWidth":"13em"
                      }); */
    });
    });

function AssigntoAll(){
      if($('#assign').val()==1)
     {
       $('#selectAll').click();
      $('#presourceDiv').addClass('hide');

         $('#resr').addClass('hide');
        
        
   } else
    {
      $('#selectNone').click();
      $('#presourceDiv').removeClass('hide');

     $('#resr').removeClass('hide');
        
    }
  }
  function projectAddEdit(projectId,flag) {
    
     $('#presource').val(" ").trigger("change"); 
     $('#presource').trigger("chosen:updated");

      $('#ptech').val(" ").trigger("change");
     $('#ptech').trigger("chosen:updated");
       $('#pcomplexity').val(" ").trigger("change");
      $('#pcomplexity').trigger("chosen:updated");
        $('#pcommercialhead').val(" ").trigger("change");
       $('#pcommercialhead').trigger("chosen:updated");
         $('#paccounthead').val(" ").trigger("change");
         $('#paccounthead').trigger("chosen:updated");
          $('#plocation').val(" ").trigger("change");
         $('#plocation').trigger("chosen:updated");
           $('#ccontact').val(" ").trigger("change");
           $('#ccontact').trigger("chosen:updated");
    // $('#pid').val(data[0][0].id);
    $('#pactive').removeClass('hide');
    $('#showallclient').addClass('hide');
    var log='';
    $('#projectform').trigger("reset");
    /*  $("#ptech").html("");
       <% for(var i=0;i<tech.length;i++) {%>
              log=log+"<option value='<%=tech[i].id%>'><%=tech[i].description1%></option>";
                      <%}%>
            $("#ptech").append(log);*/
                  
      var techarr=[];
      var userarr=[];
      document.getElementById("pstatus2").disabled = false;
            $.ajax({
                url: '/editproject',
                type: 'post',
                data:{"pid":projectId,"flag":flag },
                
                success: function(data) {
                console.log(data,'meee00');
                     var log = '<ul>',log1='',log2=''; 
                      $('#pid').val(data[0][0].id);
                      $('#idpname').val(data[0][0].projectTitle);
                      $('#pcode').val(data[0][0].pcode);
                      //$('#ptech').trigger("chosen:updated");
                      $('#paccounthead').val(data[0][0].accountHead);
                      $('#pcommercialhead').val(data[0][0].commercialHead);
                      $('#pmanager').val(data[0][0].manager);
                      $('#pclienttet').val(data[0][0].clientName);
                      $('#DescriptionID').val(data[0][0].description);
                      $('#datepicker').val(data[0][0].plannedStartDate);
                      $('#datepicker1').val(data[0][0].plannedEndDate);
                      //$('#ptech').val(data[0][0].description1);
                      $('#plocation').val(data[0][0].plocation);
                      $('#pcomplexity').val(data[0][0].pcomplexity);
                      if(data[0][0].actualStartDate=='00/00/00'){
                      $('#datepicker2').val('');
                      $('#datepicker3').val('');}
                      else{
                         $('#datepicker2').val(data[0][0].actualStartDate);
                      $('#datepicker3').val(data[0][0].actualEndDate);
                      }
                      $('#planReq').val(data[0][0].isPlanReq);
                      $('#isBillable').val(data[0][0].isBillable);
                      $('#isBillable1').val(data[0][0].plannedEndDate);
                      $('#ptype1').val(data[0][0].ptype);
                      $('#taxCode').val(data[0][0].taxCode);
                      $('#poNumber').val(data[0][0].poNumber);
                      $('#pcat').val(data[0][0].category);
                      getClientContact(data[0][0].clid);
                       //$('#pcomplexity').val(data[0][0].pcomplexity);
                       if(data[0][0].isActive==1){
                       document.getElementById("pstatus1").checked = true;
                       }
                       else{
                        alert(data[0][0].isActive);
                        document.getElementById("pstatus2").checked = true;
                       }
                 /*      $('#pcommercialhead').val(data[0][0].commercialHead).select2({
                                        fieldWidth:'13em'
                                        });*/
                       // $('#paccounthead').val(data[0][0].accountHead).select2({
                       //                  fieldWidth:'13em'
                       //                  });

                       // $('#pmanager').val(data[0][0].manager).select2({
                       //                  fieldWidth:'13em'
                       //                  });

                       $('#pclient').val(data[0][0].clid);
                       $('#pclienttet').val();
                       // $('#pcomplexity').val(data[0][0].pcomplexity).select2({
                       //                  fieldWidth:'13em'
                       //                  });
                       // $('#plocation').val(data[0][0].locid).select2();
                        for(var i=0;i<data[0].length;i++){
                         
                          techarr[i]=data[0][i].technologyId;

                       }
                    
                         for(var i=0;i<data[0].length;i++){
                          userarr[i]=data[0][i].userId;
                          
                       }
                       $('#ptech').val(techarr);
                       $('#presource').val(userarr);
                        /*$('#ptech').val(techarr).select2({  
                                         allowClear: true ,
                                        fieldWidth:'13em'
                                        });*/

                        /* $('#presource').val(userarr).select2({   
                                        fieldWidth:'13em'
                                        });*/
                          setTimeout(function(){
                            $('#ptech').trigger("chosen:updated");
                            $('#presource').trigger("chosen:updated");
                            $('#cal').trigger("chosen:updated");
                            $('#pcomplexity').trigger("chosen:updated");
                            $('#pcommercialhead').trigger("chosen:updated");
                            $('#paccounthead').trigger("chosen:updated");
                            $('#plocation').trigger("chosen:updated");
                              $('#ptype1').trigger("chosen:updated");

                            $('#pmanager').trigger("chosen:updated");
                            $('#pcat').trigger("chosen:updated");
                            $('#poNumber').trigger("chosen:updated");
                            $('#ccontact').val(" ").trigger("change");
                            $('#taxCode').trigger("chosen:updated");

                          // $('#ccontact').val(data[0][0].ccmid).select2({   
                          //               fieldWidth:'13em'
                          //               });
                        },50);

         }
       });
          $("#projectadd").removeClass('hide');
             $("#addclient").addClass('hide');
                       
                       $("#addwbs").addClass('hide');
                       $("#aa").addClass('hide');
    
  }

function checkedit(){
/*  var r = confirm("Do you want to edit this project ?");
    if (r == true) {
        
        return true;
    } else {
        return false;
    }*/
    return true;
}

  function inittree(){
     projectStatus();
    setTimeout(function(){ 
        $( '.tree li' ).each( function() {
          
            if( $( this ).children( 'ul' ).length > 0 ) {
                $( this ).addClass( 'parent' );     
            }
        });
        
        $( '.tree li.parent > a' ).click( function( ) {
            $( this ).parent().toggleClass( 'active' );
            $( this ).parent().children( 'ul' ).slideToggle( 'fast' );
        });
        
        $( '#all' ).click( function() {
          
          $( '.tree li' ).each( function() {
            $( this ).toggleClass( 'active' );
            $( this ).children( 'ul' ).slideToggle( 'fast' );
          });
        });
        
        $( '.tree li' ).each( function() {
            $( this ).toggleClass( 'active' );
            $( this ).children( 'ul' ).slideToggle( 'fast' );
        });
        },5000);
         setTimeout(function(){  
    $('#all').click();   },6000);
  
     
  }


  function showhide(ids,flags,prantid,myelement){
   
    var vals=$('#in'+ids+'').val(); //(vals==1)&&
   
    $(".anvi").addClass('hide');
    if((prantid!=0)){
       if(flags==0){
     $('#div'+ids).removeClass('hide');
     $('#in'+ids+'').val("0");
   }
    if(flags==1){
     $('#divclient'+ids).removeClass('hide');
     $('#in'+ids+'').val("0");
   }
   if(flags==2){
     $('#divp'+ids).removeClass('hide');
     $('#in'+ids+'').val("0");
   }
   if(flags==3){
     $('#divw'+ids).removeClass('hide');
     $('#in'+ids+'').val("0");
   }
   if(flags==4){
     $('#divs'+ids).removeClass('hide');
     $('#in'+ids+'').val("0");
   }
    }
    else{
    $('#div'+ids+'').addClass('hide');
     $('#in'+ids+'').val("1");  
    }
    if(flags==0){
      $('#alldetails').html('');
       $('#alldetails').append('Clients List');
    showclient();}
    if(flags==1){
       $('#alldetails').html('');
       $('#alldetails').append('Projects List');
    showproject(ids);}
    if(flags==2){
       $('#alldetails').html('');
       $('#alldetails').append('Wbs List');
    showwbs(ids);}
    if(flags==3){
       $('#alldetails').html('');
       $('#alldetails').append('Assignments List');
    showassgnment(ids);}
       if(flags==4){
    Editassignment(ids);
  }
  }
  

  function showclientform(){
    $('#showallclient').addClass('hide');
    $("#addclient").removeClass('hide');
    $("#projectadd").addClass('hide');
    $("#aa").addClass('hide');
    $("#addwbs").addClass('hide');
     $('#hiddeneditflag').val(0);
                                      $("#hiddenid").val('');
                                      $("#cname").val('');
                                      $("#cabbname").val('');
                                      $("#category").val('');
                                      $("#cal").val('');
                                      $('#cal').trigger("chosen:updated");
                                      $("#ccode").val('');
                                      $("#clocation").val('');
                                      $('#clocation').trigger("chosen:updated");
                                      $('#caddress').val('');
                                      $('#createclientcontect').html('');

  }

   function projectStatus(flag){
    

    $.ajax({
                url: '/projectfortree',
                data: { "flag": flag},
                type: 'post',
                async: false,
                success: function(data) {

                     var log = '<ul id="treeul">',log1='',log2='';
                                                                     //showaddwbsform('+data[0][i].id+','+projname+')
                    
                    for (var i = data[0].length-1; i >=0 ; i--) {
                      //$('#projecttreevew').append(showaddprojectform()
                  var projname =  data[0][i].clientName.toString();
                     log=log+'<li class=""><a class="c'+data[0][i].id+'" id="client_Anchor'+data[0][i].id+'" onclick="showhide('+data[0][i].id+',1,'+data[0][i].id+',this)"><span class="fa fa-folder" style="font-size:15px;color:green;padding-right:10px"></span>'+data[0][i].clientName+'</a><div class="hide anvi" id="divclient'+data[0][i].id+'" style="margin-left: 235px;width:100px;margin-top: -22px"><input type="hidden" id="tet'+data[0][i].id+'" value="'+data[0][i].clientName+'"><input type="hidden" id="in'+data[0][i].id+'" value="1"><span onclick="clientsEdit('+data[0][i].id+',1)" title="Edit Client" class="glyphicon glyphicon-edit" style="color:red;font-size: 15px"></span><span id="addproj'+data[0][i].id+'" title="Add Project" onclick="showaddprojectform('+data[0][i].id+','+i+')" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span  id="activeClient'+data[0][i].id+'" onclick="activeInactive('+data[0][i].id+',1,1,this)" title="Deactivate Client" class="glyphicon glyphicon-ok-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveClient'+data[0][i].id+'" onclick="activeInactive('+data[0][i].id+',0,1,this)" class="glyphicon  glyphicon-remove-sign hide" title="Activate Client" style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul id="client'+data[0][i].id+'"></ul></li>';

                      if(data[0][i].isActive==0){ 
                      // $(element).css("color","red");
                        $("#".concat(data[0][i].id)).css("color","red");
                        $("#activeClient".concat(data[0][i].id)).addClass("hide");
                        $("#addproj".concat(data[0][i].id)).addClass("hide");
                       $("#inactiveClient".concat(data[0][i].id)).removeClass("hide");
                     
                       }
                       else{
                           
                        $("#activeClient".concat(data[0][i].id)).removeClass("hide"); 
                         $("#inactiveClient".concat(data[0][i].id)).addClass("hide");
                          $("#addproj".concat(data[0][i].id)).removeClass("hide");
                        
                       }


                }
                log=log+'</ul>';
                $('#treeview').append(log);
                
                      for (var i = data[1].length-1; i >=0 ; i--) {
                     currentprojname[i] =  data[1][i].projectTitle.toString();
                      pstartdate[i]=data[1][i].plannedStartDate;
                      pendDate[i]=data[1][i].plannedEndDate;
                     $('#client'+data[1][i].cname+'').append('<li class=""><a id="project_Anchor'+data[1][i].id+'" class="c'+data[1][i].cname+'"  onclick="showhide('+data[1][i].id+',2,'+data[1][i].cact+',this)"><span  class="fa fa-life-ring" style="font-size:15px;color:green;padding-right:10px"></span>'+data[1][i].projectTitle+'</a><div class="hide cd'+data[1][i].cname+' anvi " id="divp'+data[1][i].id+'" style="margin-left: 200px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[1][i].id+'" value="1"><span onclick="projectAddEdit('+data[1][i].id+',1)" title="Edit Project" class="glyphicon glyphicon-edit" style="color:red;font-size: 15px"></span><span id="add'+data[1][i].id+'" title="Add WBS" onclick="showaddwbsform('+data[1][i].id+','+i+')" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="activeProject'+data[1][i].id+'" onclick="activeInactive('+data[1][i].id+',1,2,this)" title="Deactivate Project" class="glyphicon glyphicon-ok-sign " style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveProject'+data[1][i].id+'" title="Activate Project" onclick="activeInactive('+data[1][i].id+',0,2,this)"class="glyphicon  glyphicon-remove-sign hide" style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul id="project'+data[1][i].id+'"></ul></li>');

                      

                      if(data[1][i].isActive==0){
                        $("#".concat(data[1][i].id)).css("color","red");
                        $("#activeProject".concat(data[1][i].id)).addClass("hide");
                        $("#add".concat(data[1][i].id)).addClass("hide");
                       $("#inactiveProject".concat(data[1][i].id)).removeClass("hide");
                          if(data[1][i].cact==0){
                       $(".c".concat(data[1][i].cname)).css("color","red");
                       $(".cd".concat(data[1][i].cname)).addClass("hide"); 
                       }
                       }
                       else{
                        $("#activeProject".concat(data[1][i].id)).removeClass("hide"); 
                         $("#inactiveProject".concat(data[1][i].id)).addClass("hide");
                         $("#add".concat(data[1][i].id)).removeClass("hide");
                       }
                       
                }
             

                  for (var i = data[2].length-1; i >=0 ; i--) {   
                     (function(i){

                   currentwbsname[i]=data[2][i].WBSName;
                   wbsprojname[i]=data[2][i].projectTitle;
                   wstartdate[i]=data[2][i].wplannedStartDate;  
                   wendDate[i]=data[2][i].wplannedEndDate;
                      window.setTimeout(function(){ 
                      $('#project'+data[2][i].projectId+'').append('<li class=""><a class="c'+data[2][i].cname+' p'+data[2][i].projectId+'" id="'+data[2][i].WBSID+'" onclick="showhide('+data[2][i].WBSID+',3,'+data[2][i].pact+',this)"><span class="fa fa-tasks" style="font-size:15px;color:green;padding-right:10px"></span>'+data[2][i].WBSName+'</a><div class="hide anvi pd'+data[2][i].projectId+' c'+data[2][i].cname+'" id="divw'+data[2][i].WBSID+'" style="margin-left: 165px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[2][i].WBSID+'" value="1"><span onclick="Editwbsdetail('+data[2][i].WBSID+')" class="glyphicon glyphicon-edit" title="Edit Wbs" style="color:red;font-size: 15px"></span><span id="addass'+data[2][i].id+'" onclick="addassignmentinwbs('+data[2][i].WBSID+','+i+','+data[2][i].projectId+','+data[2][i].WBSID+')" class="glyphicon glyphicon-plus-sign" title="Add Assignment" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="activeWbs'+data[2][i].WBSID+'"onclick="activeInactive('+data[2][i].WBSID+',1,3,this)" title="Deactivate WBS" class="glyphicon glyphicon-ok-sign " style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveWbs'+data[2][i].WBSID+'" onclick="activeInactive('+data[2][i].WBSID+',0,3,this)" class="glyphicon  glyphicon-remove-sign hide" title="Activate WBS" style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul id="wbs'+data[2][i].WBSID+'"></ul></li>');
                      
                      if(data[2][i].isActive==0){
                        $("#".concat(data[2][i].WBSID)).css("color","red");
                        $("#activeWbs".concat(data[2][i].WBSID)).addClass("hide");
                         $("#addass".concat(data[2][i].WBSID)).addClass("hide");
                        $("#inactiveWbs".concat(data[2][i].WBSID)).removeClass("hide");
                          if(data[2][i].pact==0){
                            $(".p".concat(data[2][i].projectId)).css("color","red");     
                            $(".pd".concat(data[2][i].projectId)).addClass("hide"); 
                          }
                       }
                       else{
                        $("#addass".concat(data[2][i].WBSID)).removeClass("hide");
                        $("#activeWbs".concat(data[2][i].WBSID)).removeClass("hide"); 
                        $("#inactiveWbs".concat(data[2][i].WBSID)).addClass("hide");
                       }
                        }, i * 4);

                   }(i));
                       
                }

                     for (var i = data[3].length-1; i >=0 ; i--) { 
                      
                     (function(i){
  
                      window.setTimeout(function(){ 
                        
                      $('#wbs'+data[3][i].WBSID+'').append('<li class=""><a id="'+data[3][i].id+'" class="c'+data[3][i].cname+' p'+data[3][i].ProjectId+' w'+data[3][i].WBSID+'" onclick="showhide('+data[3][i].id+',4,'+data[3][i].wact+',this)"><span class="fa fa-user" style="font-size:15px;color:green;padding-right:10px"></span>'+data[3][i].name+'</a><div class="hide anvi c'+data[3][i].cname+' pd'+data[3][i].ProjectId+' wd'+data[3][i].WBSID+'" id="divs'+data[3][i].id+'" style="margin-left: 160px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[3][i].id+'" value="1"><span id="activeAssignment'+data[3][i].id+'" onclick="activeInactive('+data[3][i].id+',1,4,this)"class="glyphicon glyphicon-ok-sign" title="Deactivate Assignment" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveAssignment'+data[3][i].id+'" onclick="activeInactive('+data[3][i].id+',0,4,this)" class="glyphicon  glyphicon-remove-sign hide "  title="Activate Assignment" style="color:red;font-size: 15px;margin-left: 20px"></span></div></li>');
                      if(data[3][i].isActive==0){
                     
                        $("#".concat(data[3][i].id)).css("color","red");
                      $("#activeAssignment".concat(data[3][i].id)).addClass("hide");
                       $("#inactiveAssignment".concat(data[3][i].id)).removeClass("hide");
                       if(data[3][i].wact==0){
                         $(".wd".concat(data[3][i].WBSID)).addClass("hide"); 
                       }
                       }
                       else{
                    
                        $("#activeAssignment".concat(data[3][i].id)).removeClass("hide"); 
                         $("#inactiveAssignment".concat(data[3][i].id)).addClass("hide");
                       }
                        }, i*6);

                   }(i));

                }
              }
            });
  }


  /**********************for add project ********************/
    var tabDisable=0;
  var addedit=0;
  var pressButton=0;
  var abcd=0;


   /* function abcd(){
      alert('vdfsvfdsvgsd');
      //$("#presource").val([<%if(flag==1){for(var i=0;i<name.length;i++){%>"<%=name[i].userId%>",<%}}%>]).prop("selected", false);
    }
*/

   /* $('#pclient').change(function() {
       alert('1');
    }); */

function getSelectedOptions(cid){//alert(cid);
  $.ajax({
                url: '/clientContactAccToClient',
                type: 'post',
                data: { "cid": cid},
                success: function(data) {
  
               $("#ccontact").val([<%if(flag==1){for(var i=0;i<name.length;i++){console.log(name[i].ccmid)%>"<%=name[i].ccmid%>",<%}}%>]).prop("selected",false);
               console.log('name id---<%=name.length%>','data id---',data[0].length);

                  var string1="<select class='chosen-select' multiple='multiple' id=\"ccontact\"><option value=0 disabled>Select </option>" ;
                  var temparr=[];

                   for(var i =0;i<data[0].length;i++){   
                
                        string1+="<option value="+data[0][i].id+" <%if(flag==1){for(var j=0;j<name.length;j++){%>";

                        console.log('name id---<%=name[j].ccmid%>','data id---',data[0][i].id);
                        if(data[0][i].id=='<%=name[j].ccmid%>' && temparr.indexOf('<%=name[j].ccmid%>')<0){
                          //console.log(i,'--j=<%=j%>');
                          string1+='selected';
                          temparr.push('<%=name[j].ccmid%>');

                        }

                        string1+="<%}}%>>"+data[0][i].Name+"</option>"  ;           
                        }
              string1+="</select>";
              console.log(string1);



              $("#contactDiv").html(string1);
               $(".chosen-select").chosen();
               //$('#ccontact').trigger("chosen:updated");
                   // $('#ccontact').select2({
                   //  "fieldWidth":"13em"
                   //    }); 
                }

            });
}

    var y = Math.floor((Math.random() * 1000) + 1);
    function myFunction1() {
      
      var x = document.getElementById("idpname");
      
      var x2 = document.getElementById("pcode");
      if(x.value != ''){
        var ss=x.value;
        ss=ss.charAt(0);
        var s1=x.value;
        s1=s1.charAt(1);
        ss = "".concat(ss,s1);
        x2.value = ss + "_" + y;
      }
      else{
       x2.value="";
      }
    }
    
    function specialCharacter(evt) {
      var charCode = (evt.which) ? evt.which : event.keyCode
      if ((charCode != 38 && charCode > 32 && charCode < 46) || (charCode > 57 && charCode < 64) || charCode == 126 || charCode == 96) {
        alert("This special character or number is not allowed\n ");
        return false;
      }
      return true;
    }

function allProjects() {
       
      var abc=1;
              if('<%=flag%>'=='0'){
                console.log('all project size---',<%=allProjects.length%>);
                <%if(allProjects.length>0){%>
               <%  for(var j=0;j< allProjects.length; j++){console.log("---------------",allProjects[j].projectTitle);%>
                    if($('#idpname').val()=='<%=allProjects[j].projectTitle%>'){
                    alert('Project Already Exists.\nChange the name of project');
                    abc=0;
                    document.getElementById('idpname').value = "";
                    document.getElementById('pcode').value = "";
                     $('#idpname').focus();
                    return false;
                   }
                   else{
                    abc++;

                   }

               <% } } %>
                   if(abc !=0){
                    // alert('dssdasfasdag');
                    myFunction();
                    return true;
                   }
                }
    }   

    function closelientform(){
       $('#addclient').addClass('hide'); 
    }

       function closewbsform(){
       $('#addwbs').addClass('hide'); 
    }

       function closeprojectform(){
       $('#projectadd').addClass('hide'); 
    }

       function closeassignmentform(){
       $('#addclient').addClass('hide'); 
    }

 function clientsEdit(clientid,flag){
     $("#aa").addClass('hide');
     $("#addwbs").addClass('hide');
              $('#showallclient').addClass('hide');  
              $('#addclient').removeClass('hide');
                    $.ajax({

                                url: '/clientsedit',
                                type: 'post',
                                data:{"clientid":clientid},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                                      $('#hiddeneditflag').val(1);
                                      $("#hiddenid").val(users1[0][0].id);
                                      $("#cname").val(users1[0][0].clientName);
                                      $("#cabbname").val(users1[0][0].clientAbbName);
                                      $("#category").val(users1[0][0].category);
                                      $("#cal").val(users1[0][0].clientAccountLead);
                                      $("#ccode").val(users1[0][0].clientCode);
                                      $("#clocation").val(users1[0][0].location);
                                      $('#caddress').val(users1[0][0].address);
                                     // $('#typeValue').val(users1[0][0].typeUnit);*/
                                    console.log("showlist",users1[0]);
                                    setTimeout(function(){
                            $('#cal').trigger("chosen:updated");
                            $('#category').trigger("chosen:updated");
                            $('#caddress').trigger("chosen:updated");
                            $('#clocation').trigger("chosen:updated");
                            
                        },50);
                                  }
                                });
                     $('#createclientcontect').html('');
                    $('#createclientcontect').append('<button title="Create Client Contact" class="btn btn-primary" style="background-color: #f05f40;"   data-toggle="modal" data-target="#myModal" onclick="addEditContacts(0,'+clientid+')">Create Contact</button>');
                    getContacts(clientid);

 }

 function Editassignment(assignId){
  $('.assignmentstatus').removeClass('hide');
document.getElementById("inactive").disabled = false;
      $('#showallclient').addClass('hide'); 
     $("#addwbs").addClass('hide');
      $("#assignmentId").val(assignId);      
              $('#aa').removeClass('hide');
                    $.ajax({

                                url: '/assignmentedit',
                                type: 'post',
                                data:{"clientid":assignId},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                                    projrctresource(users1[0][0].ProjectId);
                                    setTimeout(function(){
                                      $('#flagid').val(1);

                                      $("#procode").val(users1[0][0].ProjectId);
                                      $("#aprocode").val(users1[0][0].projectTitle);
                                      $("#wbs2").val(users1[0][0].WBSID);
                                      $("#awbs2").val(users1[0][0].WBSName); 
                                      $("#asd").val(users1[0][0].userId);
                                      $("#asdDiv").addClass('hide');
                                       wbsSdate=users1[0][0].wplannedStartDate;
                                       wbsEdate=users1[0][0].wplannedEndDate;
                                      /* $('#asd').val(users1[0][0].userId).tagger({   
                                        fieldWidth:'13em'
                                        });*/
                                      $("#auser").val(users1[0][0].name);
                                      $("#asd").addClass('hide');
                                      $("#auser").removeClass('hide');
                                         var td=new Date(users1[0][0].AssignmentDate);
                                         var dd=td.getDate();
                                         var mm=td.getMonth();
                                         mm=mm+1;
                                         var yr=td.getFullYear();
                                         var psdate=mm+"/"+dd+"/"+yr;
                                         var td1=new Date(users1[0][0].AssignmentEndDate);
                                         var dd1=td1.getDate();
                                         var mm1=td1.getMonth();
                                         mm1=mm1+1;
                                         var yr1=td1.getFullYear();
                                         var pedate=mm1+"/"+dd1+"/"+yr1;
                                      $("#asdatepicker").val(psdate);
                                      $("#asdatepicker1").val(pedate);
                                    },1000);
                                     // $('#caddress').val(users1[0][0].address);
                                     // $('#typeValue').val(users1[0][0].typeUnit);*/
                                   // console.log("jai mata di ass",users1[0]);
                                  }
                                });

 }


 function activeInactive(clientid1,actval1,flag1,myelement){
  if(actval1==1){
   var a = confirm("Are you sure you want to Deactivate?");
                        if (a == true) {
                            activeInactive1(clientid1,actval1,flag1,myelement);
                        }
  }
  else{
     var a = confirm("Are you sure you want to Activate?");
                        if (a == true) {
                            activeInactive1(clientid1,actval1,flag1,myelement);
                        }
  }

 }

 function activeInactive1onedit(clientid,actval,flag){
    var act;
    if(actval==1){
      act=0;
    }
    else{
      act=1;
    }

                    $.ajax({

                                url: '/activeInactive',
                                type: 'post',
                                data:{"clientid":clientid,"actval":act,"flag":flag},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                                    if(actval==1){
                                     $("#".concat(clientid)).css('color','red');
                                       /*$("#activeClient".concat(clientid)).addClass("hide");
                                       $("#inactiveClient".concat(clientid)).removeClass("hide");
                                       $("#activeProject".concat(clientid)).addClass("hide");
                                       $("#inactiveProject".concat(clientid)).removeClass("hide");
                                       $("#activeWbs".concat(clientid)).addClass("hide");
                                       $("#inactiveWbs".concat(clientid)).removeClass("hide");
                                       $("#activeAssignment".concat(clientid)).addClass("hide");
                                       $("#inactiveAssignment".concat(clientid)).removeClass("hide");*/
                                       if(flag==1){
                                        $(".c".concat(clientid)).css('color','red');
                                        $(".cd".concat(clientid)).addClass('hide');
                                       }
                                        if(flag==2){
                                        $(".p".concat(clientid)).css('color','red');
                                        $(".pd".concat(clientid)).addClass('hide');
                                       }
                                        if(flag==3){
                                        $(".w".concat(clientid)).css('color','red');
                                        $(".wd".concat(clientid)).addClass('hide');
                                       }
                                     
                                   }
                                     else{
                                       $("#".concat(clientid)).css('color','black');
                                      /* $("#activeClient".concat(clientid)).removeClass("hide");
                                       $("#inactiveClient".concat(clientid)).addClass("hide");
                                       $("#activeProject".concat(clientid)).removeClass("hide");
                                       $("#inactiveProject".concat(clientid)).addClass("hide");
                                       $("#activeWbs".concat(clientid)).removeClass("hide");
                                       $("#inactiveWbs".concat(clientid)).addClass("hide");
                                       $("#activeAssignment".concat(clientid)).removeClass("hide");
                                       $("#inactiveAssignment".concat(clientid)).addClass("hide");*/
                                          if(flag==1){
                                        $(".c".concat(clientid)).css('color','black');
                                        $(".cd".concat(clientid)).removeClass('hide');
                                       }
                                        if(flag==2){
                                        $(".p".concat(clientid)).css('color','Black');
                                        //$(".pd".concat(clientid)).removeClass('hide');
                                       }
                                        if(flag==3){
                                        $(".w".concat(clientid)).css('color','black');
                                        //$(".wd".concat(clientid)).removeClass('hide');
                                       }
                                   
                                     }
                                  }
                                });

 }

  function activeInactive1(clientid,actval,flag,myelement){
    var act;
    if(actval==1){
      act=0;
    }
    else{
      act=1;
    }

                    $.ajax({

                                url: '/activeInactive',
                                type: 'post',
                                data:{"clientid":clientid,"actval":act,"flag":flag},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                                    if(actval==1){
                                      console.log(flag,'flagvalue');
                                       console.log($(myelement).closest('.anvi').prev(),'amit');
                                       console.log($(myelement).closest('.anvi').next('a'),'child');
                                       console.log( $(myelement).siblings("ul.level1"),'plooo');
                                      $(myelement).closest('.anvi').prev().css('color','red');
                                     $("#".concat(clientid)).css('color','red');                                                                  
                                       /*$("#activeWbs".concat(clientid)).addClass("hide");
                                       $("#inactiveWbs".concat(clientid)).removeClass("hide");*/
                                      
                                      
                                       if(flag==1){
                                        $('#client'+clientid + ' a').css('color','red');
                                          $('#client'+clientid +' .glyphicon-ok-sign').addClass("hide");
                                          $('#client'+clientid +' .glyphicon-remove-sign').removeClass("hide");
                                         $("#activeClient".concat(clientid)).addClass("hide");
                                       $("#inactiveClient".concat(clientid)).removeClass("hide");
                                        /*$(".c".concat(clientid)).css('color','red');
                                        $(".cd".concat(clientid)).addClass('hide');*/
                                       }
                                        if(flag==2){
                                          $('#project'+clientid + ' a').css('color','red');
                                          $('#project'+clientid +' .glyphicon-ok-sign').addClass("hide");
                                          $('#project'+clientid +' .glyphicon-remove-sign').removeClass("hide");
                                        $("#activeProject".concat(clientid)).addClass("hide");
                                        $("#inactiveProject".concat(clientid)).removeClass("hide");
                                       /*$(".p".concat(clientid)).css('color','red');
                                        $(".pd".concat(clientid)).addClass('hide');*/
                                       }
                                        if(flag==3){
                                          $('#wbs'+clientid +' .w'+clientid).css('color','red');
                                          $('#wbs'+clientid +' .wd'+clientid +' .glyphicon-ok-sign').addClass("hide");
                                          $('#wbs'+clientid +' .wd'+clientid +' .glyphicon-remove-sign').removeClass("hide");
                                          $("#activeWbs".concat(clientid)).addClass("hide");
                                       $("#inactiveWbs".concat(clientid)).removeClass("hide");
                                       $(myelement).closest('.anvi').next().css('color','red');
                                        /*$(".w".concat(clientid)).css('color','red');
                                        $(".wd".concat(clientid)).addClass('hide');*/

                                       }
                                       if(flag==4){
                                        $("#activeAssignment".concat(clientid)).addClass("hide");
                                       $("#inactiveAssignment".concat(clientid)).removeClass("hide");
                                       }
                                     messageBox("Deactivated Successfully");
                                   }
                                     else{
                                       console.log(flag,'flagvalue');
                                      console.log($(myelement).closest('.anvi').prev(),'shalu');
                                      $(myelement).closest('.anvi').prev().css('color','black');
                                       $("#".concat(clientid)).css('color','black');
                                     
                                       /*$("#activeWbs".concat(clientid)).removeClass("hide");
                                       $("#inactiveWbs".concat(clientid)).addClass("hide");*/
                                       
                                          if(flag==1){
                                       $('#client'+clientid + ' a').css('color','black');
                                          $('#client'+clientid +' .glyphicon-ok-sign').removeClass("hide");
                                          $('#client'+clientid +' .glyphicon-remove-sign').addClass("hide");     
                                       $("#activeClient".concat(clientid)).removeClass("hide");
                                       $("#inactiveClient".concat(clientid)).addClass("hide");
                                       /* $(".c".concat(clientid)).css('color','black');
                                        $(".cd".concat(clientid)).removeClass('hide');*/
                                       }
                                        if(flag==2){
                                          $('#project'+clientid + ' a').css('color','black');
                                          $('#project'+clientid +' .glyphicon-ok-sign').removeClass("hide");
                                          $('#project'+clientid +' .glyphicon-remove-sign').addClass("hide");
                                        $("#activeProject".concat(clientid)).removeClass("hide");
                                        $("#inactiveProject".concat(clientid)).addClass("hide");   
                                        /*$(".p".concat(clientid)).css('color','Black');*/
                                       
                                       }
                                        if(flag==3){
                                           $('#wbs'+clientid +' .w'+clientid).css('color','black');
                                          $('#wbs'+clientid +' .wd'+clientid +' .glyphicon-ok-sign').removeClass("hide");
                                          $('#wbs'+clientid +' .wd'+clientid +' .glyphicon-remove-sign').addClass("hide");
                                        $("#activeWbs".concat(clientid)).removeClass("hide");
                                       $("#inactiveWbs".concat(clientid)).addClass("hide");
                                       /* $(".w".concat(clientid)).css('color','black');*/
                                        
                                       }
                                       if(flag==4){
                                       $("#activeAssignment".concat(clientid)).removeClass("hide");
                                       $("#inactiveAssignment".concat(clientid)).addClass("hide");
                                       }
                                     messageBox("Activated Successfully");
                                     }
                                  }
                                });

 }
    
    function resetUserForm() {
      $("#tab1").click();
      $(".modal input, textarea").val("");
      $(".modal select").val(0);
      $('input[type="radio":checked]').each(function() {
        $(this).checked = false;
      });
      $("#btnuser").text('Create User');
      $("#hdnId").val('0');
    }
            
    function validBasicInfo1() {
      pressButton=1;
      validBasicInfo();
    }
    
    function validBasicInfo() {
    resetError();
      var re="[a-zA-Z ]*$";
      var errorIdpname = $('#errorIdpname');
      var errorPclient = $('#errorPclient');
      var errorPtech = $('#errorPtech');
      var errorDatepicker = $('#errorDatepicker');
      var errorDatepicker1 = $('#errorDatepicker1');

      var idpname=$('#idpname');
      var pclient = $('#pclient');
      var ptech = $('#ptech');
      var datepicker = $('#datepicker');
      var datepicker1 = $('#datepicker1');

      if(idpname.val().trim().length<=0  || idpname.val()==''){
        errorIdpname.text("Required field");
        idpname.focus();
        return false;
      }
      if(pclient.val()==null || pclient.val()=='0')  
      {
        errorPclient.text("Required field");
        pclient.focus();
        return false;
      }
      if(ptech.val()==null || ptech.val()=='0')
      {
        errorPtech.text("Required field"); 
        ptech.focus();
        return false;
      }

        var date = new Date(datepicker.val());
        if(datepicker.val() != ''){
        if(date == 'Invalid Date'){
               errorDatepicker.text('Invalid  Planned Start Date');
               datepicker.focus();
                return false;
            }
          }

         var date = new Date(datepicker1.val());
         if(datepicker1.val() != ''){
         if(date == 'Invalid Date'){
           errorDatepicker1.text('Invalid  Planned End Date');
           datepicker1.focus();
            return false;
          }
        }
          
              var psdate=new Date(datepicker.val()); var pedate=new Date(datepicker1.val()); 
            if(datepicker.val() == ''){
              errorDatepicker.text('Please Select Planned Start Date');
              datepicker.focus();
              return false;
            }
            if(datepicker1.val() == ''){
              errorDatepicker1.text('Please Select Planned End Date');
              datepicker1.focus();
              return false;
            }

              if(psdate>pedate){
              errorDatepicker1.text('Please Select Planned End Date grater than Start Date');
              datepicker1.focus();
              return false;
            }


      
      if($('#hdnId').val() == 0){
        if(abcd==0)addedit=0;
      }
      else{
        addedit=1;
      }
      $('#tabDetail').val(1);
        tabDisable=1;
        if(pressButton==1){addProject();}
        else{return true;}
    }
    
    function validBugInfo1() {
      pressButton=2;
      validBugInfo();
    }
    
    function validBugInfo() {
      resetError();
      var errorPresource = $('#errorPresource');
      var abc=validBasicInfo();
      //alert('abc--'+abc);
      if(abc){
             var text = $('#datepicker2').val();
             var date = new Date(text);

             if(text != ''){
             if(date == 'Invalid Date'){
               alert('Invalid  Actual Start Date');
                return false;
            } }
            var text = $('#datepicker3').val();
             var date = new Date(text);
             if(text != ''){
             if(date == 'Invalid Date'){
               alert('Invalid  Actual End Date');
                return false;
            } }
             var text = $('#datepicker').val();
             var text1 = $('#datepicker1').val();
             var text2 = $('#datepicker2').val();
             var text3 = $('#datepicker3').val();

            var psdate=new Date(text); var pedate=new Date(text1); var asdate=new Date(text2); var aedate=new Date(text3);

            if(text3 != ''){  if (text2 != ''){
              if(asdate>aedate){
                alert('Actual End Date can not be less than Actual Start Date');
                return false;
              }
            }
            else{
              alert('Please Select Actual Start Date');
              return false;
            }
          }

          if($('#presource').val()==null || $('#presource').val()=='0')  
            {
              errorPresource.text("Required field"); 
              $('#presource').focus();
              return false;
            }
              abcd=1;
           if($('#hdnId').val() == 0){
              if(pressButton==2)addedit=1;
              else addedit=1;
           }
           else{
             addedit=1;
              }
              //$('#tabDetail').val(2);
              tabDisable=2;
              if(pressButton==2){$('#tabDetail').val(1);addProject();}
              else{$('#tabDetail').val(1);return true;}
            }
          }
          function validFinanceInfo1(){
              pressButton=3;
              validFinanceInfo();
          }
        
            function validFinanceInfo(){
              var abc=validBugInfo();
              if(abc){
                abcd=1;
                if($('#hdnId').val() == 0){
              }
              else{
                addedit=1;
              }
              tabDisable=3;
              if(pressButton==3){addProject();}
              else{return true;}
            }
          }
          function addProject() {

           
                  if($("#pid").val() == 0){
                       addProject1();
                }
                else{
                   $.ajax({
                            url: '/checkProjectWbsDate',
                            type: 'post',
                            data: {"pid": $("#pid").val(), "wid":0, "psdate": $("#datepicker").val(),
                            "pedate": $('#datepicker1').val(),"wpsdate":'0',"wpedate":'0',flag:1
                                  },
                            success: function(data) {
                              
                                if(data[0][0].msg==0){
                                            addProject1();
                                }
                                else{
                                  alert('date validations of project are not according to WBS');
                                }
                            }

                        });
                }
            

            }

            function showaddprojectform(ides,flag){
            $("#tab1").click(); 
            $("#projectadd").removeClass('hide');
              $("#addwbs").addClass('hide');
              $("#pactive").addClass('hide');
              $("#addclient").addClass('hide');
                                   $("#idpname").val('');
                                   $("#planReq").val('');         
                                   $("#pcode").val('');
                                   $('#ptype1').val('');
                                   $('#pcat').val('');
                                   $("#DescriptionID").val('');
                                   $("#datepicker").val('');
                                   $('#datepicker1').val('');
                                   $("#datepicker2").val('');
                                   $('#datepicker3').val('');
                                   $('#taxCode').val('');
                                   $('#poNumber').val('');
                                   $("#hdnId").val('');
                                   $("#pid").val('');
                                   $('#tabDetail').val();
                                   document.getElementById("pstatus2").disabled = true;
              var cliname=$("#tet".concat(ides)).val();
        document.getElementById("pstatus1").checked = true;
        $('#showallclient').addClass('hide');
        $('#pclient').val(ides);        
        $('#pclienttet').val(cliname);
        $('#presource').val(" ").trigger("change"); 
        $('#presource').trigger("chosen:updated");
        $('#ptech').val(" ").trigger("change");
        $('#ptech').trigger("chosen:updated");
        $('#pcomplexity').val(" ").trigger("change")
        $('#pcomplexity').trigger("chosen:updated");
        $('#pcommercialhead').val(" ").trigger("change");
        $('#paccounthead').val(" ").trigger("change");
        $('#paccounthead').trigger("chosen:updated");
        $('#plocation').val(" ").trigger("change");
        $('#plocation').trigger("chosen:updated");
        $('#pmanager').val(" ").trigger("change");
        $('#pmanager').trigger("chosen:updated");

     
     /* $('#ptech').select2({  
                                         allowClear: true ,
                                        fieldWidth:'13em'
                                        });*/
     
       
     /* $('#presource').select2({
        "fieldWidth":"13em"
      });*/
      //$("#presource").searchableOptionList();

    /* $('#presource').select2({
        "fieldWidth":"13em"
      });*/

      // $('#pcomplexity').select2({
      //   "fieldWidth":"20em"
      // });
      /*$('#pcommercialhead').select2({
        "fieldWidth":"13em"
      });*/
      // $('#paccounthead').select2({
      //   "fieldWidth":"13em"
      // });

      // $('#pmanager').select2({
      //   "fieldWidth":"13em"
      // });

      /* $('#ccontact').tagger({
        "fieldWidth":"13em"
      });*/

  
  // $('#plocation').val('').select2({
  //       "fieldWidth":"13em"
  //     });
        getClientContact(ides);       
             
            }

              function showaddwbsform(prid,prname){
                $('#wbsstatus').addClass('hide');
                  $("#addclient").addClass('hide');    
                 $('#showallclient').addClass('hide');
                 $("#flaghide").val('0');
                 $("#proname").val(prid);
                 $("#pronameid").val(currentprojname[prname]);
                 $("#projectadd").addClass('hide');
                 $("#addwbs").removeClass('hide');
                 $("#aa").addClass('hide');
                               $("#wbsname").val('');
                               $("#wbscode").val('');
                                  /*dgf*/
                                 $("#wbshidden").val('');
                                 $("#flaghide").val('');
                                 $("#idhide").val('');

                                 $("#wbsowner").val('');
                                  
                               $("#datepickerw2").val('');
                              $('#datepickerw3').val('');
                                  
                                    $('#wbseffort').val('');
                                   $('#wbseffort1').val(''),
                                    $('#wbslocation').val('');
                                    $('#typeValue').val('');
                                    document.getElementById("wbsstatus2").disabled = true;
                 projectSdate=pstartdate[prname];
                 projectEdate=pendDate[prname];
                 var td=new Date(projectSdate);
              var dd=td.getDate();
              var mm=td.getMonth();
              mm=mm+1;
              var yr=td.getFullYear();
              var psdate=mm+"/"+dd+"/"+yr;
               var td1=new Date(projectEdate);
              var dd1=td1.getDate();
              var mm1=td1.getMonth();
              mm1=mm1+1;
              var yr1=td1.getFullYear();
              var pedate=mm1+"/"+dd1+"/"+yr1;
                 $("#datepickerw").val(psdate);
                 $("#datepickerw1").val(pedate);
                 document.getElementById("wbsstatus1").checked = true;
                var flag=1;
                 if (flag == 1) {
                            return ($.ajax({
                                url: '/showwbsProjectby',
                                type: 'post',
                                data:{"clientid":prid},
                                dataType: 'json',

                                success: function(users1) {
                                  $('#wbshtable').removeClass('hide');
                                   $('#asstable').addClass('hide');
                                    var users = users1[0];
                                   console.log("asahsfdghafsdh ",users);
                             

                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>WBS Name</th>" +"<th>WBS Code</th>" +"<th>Project Name</th>" +"<th>plannedStartDate</th>" +"<th>plannedEndDate</th>" + "<th>Action</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                    
                                     
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].projectTitle + "' id='l" + users[i].projectTitle+ "'>" + "<td >" + users[i].WBSName+ "</td>" + "<td >" + users[i].WBSCode + "</td>" + "<td >" + users[i].projectTitle + "</td>" + "<td >" + users[i].wplannedStartDate.toString().slice(0,10) + "</td>" + "<td >" + users[i].wplannedEndDate.toString().slice(0,10) + "</td>" + "<td ><span class='glyphicon glyphicon-edit' title='Edit Wbs' onclick='Editwbsdetail("+users[i].WBSId+")';></span><span class='glyphicon glyphicon glyphicon-plus-sign' title='Add Assignment' style='margin-left:50px;color:green' onclick='addassignmentinwbs("+users[i].WBSId+","+(currentwbsname.indexOf(users[i].WBSName))+","+users[i].projectId+","+users[i].WBSId+")';></span></td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#wshomeTable").dataTable().fnDestroy();
                                    $("#wshomeTable").html('');

                                    $("#wshomeTable").html(log);
                                    $("#wshomeTable").dataTable({
                                        "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": true,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },{
                                            "width": "10%"
                                        },{
                                            "width": "10%"
                                        },{
                                            "width": "10%"
                                        },{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                  

                                  
                      // $('#totalclient').append("Total Project");
                    

                                }

                            }));
                        }

            }


            function addProject1(){
                            resetError();
                            var pname=$("#idpname").val();
                            var successProjectAddEdit = $('#successProjectAddEdit');
                            var pclient=$("#pclient").val();
                              var ptech=$("#ptech").val().toString();
                              var presource=$("#presource").val()==null?'0':$("#presource").val().toString();
                              var ccontact=$("#ccontact").val()==null?'0':$("#ccontact").val().toString();
                              document.getElementById("createProject").disabled = true;
                              document.getElementById("createProject1").disabled = true;
                              document.getElementById("createProject2").disabled = true;
                              if($('input:radio[name=pstatus]:checked').val()==0){
                              activeInactive1onedit($("#pid").val(),1,2)}
                              $.ajax({
                                url: '/projectAddEditDetailsWithFlag',
                                method: 'POST',
                                data: {
                                  "pname": $("#idpname").val(),
                                  "planReq": $("#planReq").val(),
                                  "pclient": pclient,
                                  "presource": presource,
                                  "ccontact":ccontact,
                                  "ptech": ptech,
                                 "pcode": $("#pcode").val(),
                                   "ptype": $('#ptype1').val(),
                                   "pcat": $('#pcat').val(),
                                   "pdescription": $("#DescriptionID").val(),
                                   "psdate": $("#datepicker").val(),
                                  "pedate": $('#datepicker1').val(),
                                  "asdate": $("#datepicker2").val(),
                                   "aedate": $('#datepicker3').val(),
                                   "isBillable": $('input:radio[name=isBillable]:checked').val(),
                                   "taxCode": $('#taxCode').val(),
                                   "poNumber": $('#poNumber').val(),
                                   "pstatus": $('input:radio[name=pstatus]:checked').val(),
                                    "pcomplexity": $('#pcomplexity').val(),
                                    "plocation": $('#plocation').val(),
                                    "pcommercialhead": $('#pcommercialhead').val(),
                                   "paccounthead": $('#paccounthead').val(),
                                   "pmanager": $('#pmanager').val(),
                                    "hdnId": $("#hdnId").val(),
                                    "pid": $("#pid").val(),
                                   "tabDetail":$('#tabDetail').val(),
                                    "assigntoallforproject":$('#assign').val()
                                  },
                                  success: function(data) {
                                   // console.log('success',data);
                                    document.getElementById("createProject").disabled = false;
                              document.getElementById("createProject1").disabled = false;
                              document.getElementById("createProject2").disabled = false;
                                   $("#pid").val(data[0][0].lid); 
                                     if(data[0][0].flag == 1){

                                      messageBox("Project Added Successfully ");
                                      currentprojname.push(pname);
                                       pstartdate.push($("#datepicker").val());
                                       pendDate.push($('#datepicker1').val());
                                       showaddwbsform(data[0][0].lid,(currentprojname.length-1))
                                    
                                      var log="";
                                      $("#client".concat(pclient)).addClass('parent');
                                       $("#client".concat(pclient)).addClass('active');
                                       log=log+'<li class="parent active"><a id="project_Anchor'+data[0][0].lid+'"onclick="showhide('+data[0][0].lid+',2,34,this)"><span class="fa fa-life-ring" style="font-size:15px;color:green;padding-right:10px"></span>'+pname+'</a><div class="hide anvi" id="divp'+data[0][0].lid+'" style="margin-left: 200px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[0][0].lid+'" value="1"><span onclick="projectAddEdit('+data[0][0].lid+',1)" title="Edit Project" class="glyphicon glyphicon-edit" style="color:red;font-size: 15px"></span><span title="Add WBS" onclick="showaddwbsform('+data[0][0].lid+','+(currentprojname.length-1)+')" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="activeProject'+data[0][0].lid+'" onclick="activeInactive('+data[0][0].lid+',1,2,this)" title="Deactivate Project" class="glyphicon glyphicon-ok-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveProject'+data[0][0].lid+'" title="Activate Project" onclick="activeInactive('+data[0][0].lid+',0,2,this)"class="glyphicon  glyphicon-remove-sign hide" style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul style="display:block" id="project'+data[0][0].lid+'"></ul></li>';
                                     $("#client".concat(pclient)).append(log);
                                 
                                    }

                                     else {
$('#project_Anchor'+data[0][0].lid+'').text($('#idpname').val());
                                      messageBox(" Project  Updated Successfully");

                                     }
                                    // var check1= '"/projectWbs?pid='+data[0][0].lid+'"';
                                    // confirmBox3("window.location.href="+check1,'window.location.href="/projectDetails"',7);
                                  },
                                  dataType: 'JSON',
                                });
            }
/*
            var addProject1Modal = function(lid) {

                                    var r = confirm("Do you want to create WBS ?");
                                    if (r == true) {
                                    window.location.href = "/projectWbs?pid="+lid;
                                    } else {
                                    window.location.href = "/projectDetails";
                                    }
                                    $('.se-pre-con').fadeOut('slow');
            }*/

            function validDocInfo(prevOrNext) {
              $("#tab" + prevOrNext).click();
             }
function specialCharacter(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if ((charCode != 38 && charCode > 32 && charCode < 46) || (charCode > 57 && charCode < 64) || charCode == 126 || charCode == 96) {
            alert("This special character or number is not allowed\n ");
            return false;
        }
        return true;
    }
  /***************end add project****************************/

  /****************wbs code******************************/
   



            
            var y = Math.floor((Math.random() * 1000) + 1);
            
            function myFunction() {
                var x = document.getElementById("wbsname");
                var x2 = document.getElementById("wbscode");
                if (x.value != '') {
                    var ss = x.value;
                    ss = ss.charAt(0);
                    var s1 = x.value;
                    s1 = s1.charAt(1);
                    ss = "".concat(ss, s1);

                    x2.value = ss + "_" + y;
                } else {
                    x2.value = "";
                }
            }

            function checkfield() {
              resetError();
              var errorProname = $('#errorProname');
              var errorWbsname = $('#errorWbsname');
              var errordatepicker = $('#errorWbspsdate');
              var errordatepicker1 = $('#errorWbspedate');
              var errordatepicker2 = $('#errorDatepicker2');
              var errordatepicker3 = $('#errordatepicker3');
              var errorWbseffort1 = $('#errorWbseffort1');

              if ($('#proname').val() == null || $('#proname').val() <= 0) {
                    errorProname.text("Required field");
                    $('#proname').focus();
                    return false;
                }

                if ($('#wbsname').val().trim().length <= 0 || $('#wbsname').val() == '') {
                    errorWbsname.text("Required field");
                    $('#wbsname').focus();
                    return false;
                }

                var text = $('#datepickerw').val();
                var date = new Date(text);
                if (text == '') {
                    errordatepicker.text('Required field');
                    return false;
                } else {
                    if (date == 'Invalid Date') {
                        errordatepicker.text('Invalid  Planned Start Date');
                        return false;
                    }
                }
                var text = $('#datepickerw1').val();
                var date = new Date(text);

                if (text1 == '') {
                    errordatepicker1.text('Required field');
                    return false;
                } else {
                    if (date == 'Invalid Date') {
                        errordatepicker1.text('Invalid  Planned End Date');
                        return false;
                    }
                }
                var text = $('#datepickerw2').val();
                var date = new Date(text);
                if(new Date($('#datepickerw1').val())< new Date(wbsSdate)){
                 messageBox("WBS Start Date is less than Project Start Date");
                }

               if(new Date($('#datepickerw2').val())< new Date(wbsEdate)){
                messageBox("WBS End Date is less than Project End Date");
                }

                if (text != '') {
                    if (date == 'Invalid Date') {
                        errordatepicker2.text('Invalid  Actual Start Date');
                        return false;
                    }
                }
                var text = $('#datepickerw3').val();
                var date = new Date(text);
                if (text != '') {
                    if (date == 'Invalid Date') {
                        errordatepicker3.text('Invalid  Actual End Date');
                        return false;
                    }
                }

            var psdate=new Date($('#datepickerw').val());var pedate=new Date($('#datepickerw1').val());    
            if(psdate< new Date(projectSdate)){
                  messageBox('WBS Planned Start Date is less than Project Planned Start Date');

                  return false;
                }
            if(pedate > new Date(projectEdate)){
              var stringval=$('#pronameid').val()+","+pedate;
                 // messageBox('Wbs Planned End Date is grater than Project Planned end Date');
                   var a = confirm("Wbs Planned End Date is grater than Project Planned end Date Are you sure you want to update Project Planned End Date?");
                        if (a == true) {
                           updateProjectDate();
                           projectEdate=pedate;
                        }

                  return false;
                }
           
                /*var sdate = $('#datepicker').datetimepicker("getDate");*/
                var text = $('#datepicker').val();
                /*var edate = $('#datepicker1').datetimepicker("getDate");*/
                var text1 = $('#datepicker1').val();
                /*var asdate = $('#datepicker2').datetimepicker("getDate");*/
                var text2 = $('#datepicker2').val();
                /*var aedate = $('#datepicker3').datetimepicker("getDate");*/
                var text3 = $('#datepicker3').val();
                var sdate = new Date(text);
                var edate = new Date(text1);
                var asdate = new Date(text2);
                var aedate = new Date(text3);


                if (sdate > edate) {
                    errordatepicker1.text('Planned End Date can not be less than Planned Start Date');
                    return false;
                }

                if (text3 != '') {
                    if (text2 != '') {
                        if (asdate > aedate) {
                            errordatepicker3.text('Actual End Date can not be less than Actual Start Date');
                            return false;
                        }
                    } else {
                        errordatepicker2.text('Please Select Actual Start Date');
                        return false;
                    }
                }

                var wbseffort = $('#wbseffort').val();
                var wbseffort1 = $('#wbseffort1').val();
                if (wbseffort != '') {
                    if (wbseffort1 <= 0 ||  wbseffort1 == null) {
                        errorWbseffort1.text('Please Select WBS Effort Type');
                        $('#wbseffort1').focus();
                        return false;
                    }
                }
                else{
                  if(wbseffort1 > 0){
                    errorWbseffort1.text('Please enter WBS effort value');
                    $('#wbseffort1').focus();
                        return false;
                  }
                }

                //submitwbs();

                addWbs1();


            }
                  var usersid=[];
                 function projrctresource(pid,wbsid){

                $.ajax({

                                url: '/getprojectresource',
                                type: 'post',
                                data:{"ids":pid,wbsid:wbsid},
                                dataType: 'json',

                                success: function(users1) {
                                  $('#asd').html('');
                           $('#presource').val(" ").trigger("change");
                                    var users = users1[0];
                                    console.log("jai mata di",users1[0]);
                                    var log='';
                                    for(i=0;i<users1[0].length;i++){
                                     
                                    log=log+"<option value="+users1[0][i].id+">"+users1[0][i].name+"</option>"      
                                    }
                                    //$("#asdDiv").html(log);
                                    $('#asd').append(log);
                                    
                                   
            
            }
          });
            }

              function getClientContact(cid){
            

                $.ajax({

                                url: '/getClientContact',
                                type: 'post',
                                data:{"ids":cid},
                                dataType: 'json',

                                success: function(users1) {
                                  
                                  $('#ccontact').html('');
                                    var users = users1[0];
                                    console.log("jai mata di client",users1[0]);
                                    var log='';
                                   
                                    for(i=0;i<users1.length;i++){
                                    
                                    log=log+"<option value="+users1[i].id+">"+users1[i].name+"</option>"  ;    
                                    }
                                   
                                   $('#ccontact').append(log);
                                    // $('#ccontact').select2({
                                    //   "fieldWidth":"13em"
                                    //        });     
                                    }
                                  });
                                }

            function addassignmentinwbs(ids,flag,pid,wbsid){
              $('.assignmentstatus').addClass('hide');
               document.getElementById("inactive").disabled = true;
              $("#assignmentId").val(0);

                $.ajax({

                                url: '/getprojectresource',
                                type: 'post',
                                data:{"ids":pid,wbsid:wbsid},
                                dataType: 'json',

                                success: function(users1) {
                                  
                                  $('#asd').html('');
                                  $('#asd').val(" ").trigger("change");
                                    var users = users1[0];
                                    console.log("bumbum bhole",users1[0]);
                                    var log='';
                                    for(i=0;i<users1[0].length;i++){
                                    
                                    log=log+"<option value="+users1[0][i].id+">"+users1[0][i].name+"</option>"  ;    
                                    }
                                      for(var j=0;j<users1[1].length;j++){
                                      usersid[j]=users1[1][j].id;
                                        
                                    }
                                    //$("#asdDiv").html(log);
                                    $('#asd').append(log);
                                    $(".chosen-select").chosen();
                                    $('#asd').trigger("chosen:updated");
                                     // $('#asd').select2({
                                     //  "fieldWidth":"13em"
                                     //       });
                                     $("#asdDiv").removeClass('hide');
                                   // $('#asd').append(log);
             $('#aprocode').val(wbsprojname[flag]);
              $('#awbs2').val(currentwbsname[flag]);
              //alert(wstartdate[flag]);
              wbsSdate=wstartdate[flag];
              wbsEdate=wendDate[flag];
              var td=new Date(wbsSdate);
              var dd=td.getDate();
              var mm=td.getMonth();
              mm=mm+1;
              var yr=td.getFullYear();
              var sdate=mm+"/"+dd+"/"+yr;
              var td1=new Date(wbsEdate);
              var dd1=td1.getDate();
              var mm1=td1.getMonth();
              mm1=mm1+1;
              var yr1=td1.getFullYear();
              var edate=mm1+"/"+dd1+"/"+yr1;
              $('#asdatepicker').val(sdate);
              $('#asdatepicker1').val(edate);
               $('#procode').val(pid);
              $('#wbs2').val(ids);
             // $('#asdatepicker').val('');
              //$('#asdatepicker1').val('');
                $("#addwbs").addClass('hide');
              $('#showallclient').addClass('hide');
                $("#aa").removeClass('hide');
                 $("#asd").removeClass('hide');
                 $("#auser").addClass('hide');
            }
          });
            }

            function Editwbsdetail(wbsid){
               $('#wbsstatus').removeClass('hide');
              $("#addwbs").removeClass('hide');
              $('#showallclient').addClass('hide');
              $('#asstable').removeClass('hide');
              $('#wdshtable').addClass('hide');
              $("#aa").addClass('hide');
              document.getElementById("wbsstatus2").disabled =false;
                    $.ajax({

                                url: '/editwbsdetail',
                                type: 'post',
                                data:{"wbsid":wbsid},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                                    console.log(users,"swapnilll");
                                      $('#assign').val(users1[0][0].assignToAll);
                                      $("#wbshidden").val(wbsid);
                                      $("#flaghide").val(1);
                                      $("#idhide").val(users1[0][0].WBSID);
                                      $("#wbsname").val(users1[0][0].WBSName);
                                      $("#wbscode").val(users1[0][0].WBSCode);
                                      $("#proname").val(users1[0][0].projectId);
                                      $("#pronameid").val(users1[0][0].projectTitle);
                                      $("#wbsowner").val(users1[0][0].WBSOwner);
                                          projectSdate=users1[0][0].plannedStartDate;
                                          projectEdate=users1[0][0].plannedEndDate;
                                       var td=new Date(users1[0][0].wplannedStartDate);
                                         var dd=td.getDate();
                                         var mm=td.getMonth();
                                         mm=mm+1;
                                         var yr=td.getFullYear();
                                         var psdate=mm+"/"+dd+"/"+yr;
                                         var td1=new Date(users1[0][0].wplannedEndDate);
                                         var dd1=td1.getDate();
                                         var mm1=td1.getMonth();
                                         mm1=mm1+1;
                                         var yr1=td1.getFullYear();
                                         var pedate=mm1+"/"+dd1+"/"+yr1;
                                      $("#datepickerw").val(psdate);
                                      $('#datepickerw1').val(pedate);
                                      if(users1[0][0].wactualStartDate.toString().slice(0,10)=='0000-00-00'){
                                       $("#datepickerw2").val(''); 
                                      }
                                      else{
                                        var td=new Date(users1[0][0].wactualStartDate);
                                         var dd=td.getDate();
                                         var mm=td.getMonth();
                                         mm=mm+1;
                                         var yr=td.getFullYear();
                                         var psdate1=mm+"/"+dd+"/"+yr;
                                       $("#datepickerw2").val(psdate1); 
                                      }
                                        if(users1[0][0].wactualEndDate.toString().slice(0,10)=='0000-00-00'){
                                       $("#datepickerw3").val(''); 
                                      }
                                      else{
                                         var td=new Date(users1[0][0].wactualEndDate);
                                         var dd=td.getDate();
                                         var mm=td.getMonth();
                                         mm=mm+1;
                                         var yr=td.getFullYear();
                                         var psdate2=mm+"/"+dd+"/"+yr;
                                       $('#datepickerw3').val(psdate2); 
                                      }
                                     // $("#datepickerw2").val(users1[0][0].wactualStartDate.toString().slice(0,10));
                                      //$('#datepickerw3').val(users1[0][0].wactualEndDate.toString().slice(0,10));
                                     // $('input:radio[name=wbsstatus]:checked').val(users1[0][0].WBSStatus);
                                     if(users1[0][0].WBSStatus==1){
                                     document.getElementById("wbsstatus1").checked = true;
                                     }
                                     else{
                                     document.getElementById("wbsstatus2").checked = true;
                                     }
                                      $('#wbseffort').val(users1[0][0].estimateEffort);
                                      $('#wbseffort1').val(users1[0][0].estimateEffort1);
                                      $('#wbslocation').val(users1[0][0].WBSLocation);
                                      $('#typeValue').val(users1[0][0].typeUnit);
                                    console.log("jai mata di",users1[0]);
                                    /*assignment add*/
                                     var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>User Name</th>" + "<th>Assignment Start Date</th><th>Assignment End Date</th></tr></thead><tbody id='tablebody' >";
                                     console.log("jai maa",users1[1]);
                                    for (var i = 0; i < users1[1].length; i++) {
                                        var tdate=new Date(users1[1][i].AssignmentDate);
                                         var dd1=tdate.getDate();
                                         var mm1=tdate.getMonth();
                                         mm1=mm1+1;
                                         var yr1=tdate.getFullYear();
                                         var assdate=mm1+"/"+dd1+"/"+yr1;
                                         var tdate1=new Date(users1[1][i].AssignmentEndDate);
                                         var dd11=tdate1.getDate();
                                         var mm11=tdate1.getMonth();
                                         mm11=mm11+1;
                                         var yr11=tdate1.getFullYear();
                                         var assdateend=mm11+"/"+dd11+"/"+yr11;
                                      
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users1[1][i].id + "><input type='hidden' value='" + users1[1][i].name + "' id='l" + users1[1][i].name+ "'>" + "<td >" + users1[1][i].name+ "</td>" + "<td ><input readonly='true' class='form-text-box assda' type='text' id='extSdate"+users1[1][i].id+"' onchange='changeAssignmentDate(" + users1[1][i].id + ",1)' value="+ assdate +"></td>"+"<td ><input readonly='true' type='text' onchange='changeAssignmentDate(" + users1[1][i].id + ",2)' class='form-text-box assda' id='extEdate"+users1[1][i].id+"' value="+ assdateend +"></td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#ashomeTable").dataTable().fnDestroy();
                                    $("#ashomeTable").html('');

                                    $("#ashomeTable").html(log);
                                    $("#ashomeTable").dataTable({
                                        "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": true,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });

                                  }
                                });
                       
                         setTimeout(function(){
                                            
                                        
                        jQuery('.assda').datetimepicker({
                    timepicker: false,
                    minDate:$('#datepickerw').val(),
                    format: 'm/d/Y'
                });},2000);

            }

            function updateProjectDate(){
              var proid=$("#proname").val();
              var pdate=$("#datepickerw1").val();

            $.ajax({
                                url: 'updateProjectDate',
                                data: {
                                    'proid': proid,
                                    'penddate':pdate
                                },
                                method: 'post',
                                success: function(data) {
                                  if(data[0][0].flag==1){
                                    messageBox('Project PlannedEndDate Updated Successfully');
                                  }
                                }
                              });
            }


            function updatewbsandproject(pid,prodate){
              var proid=pid;
              var pdate=prodate;

            $.ajax({
                                url: 'updatewbsandproject',
                                data: {
                                    'proid': proid,
                                    'penddate':pdate
                                },
                                method: 'post',
                                success: function(data) {
                                  if(data[0][0].flag==1){
                                    messageBox('Project PlannedEndDate Updated Successfully');
                                     wbsEdate=pdate;
                                  }
                                }
                              });
            }

        function updatewbsDate(){
              var proid=$('#wbs2').val();
              var pdate=$("#asdatepicker1").val();

            $.ajax({
                                url: 'updatewbsDate',
                                data: {
                                    'proid': proid,
                                    'penddate':pdate
                                },
                                method: 'post',
                                success: function(data) {
                                  if(data[0][0].flagp==1){
                                    messageBox('WBS PlannedEndDate Updated Successfully');
                                    wbsEdate=pdate;

                                  }
                                  else{
                                      var a = confirm("Wbs Planned end Date is less then project Planned End Date Are you sure you want to update project Planned End Date?");
                                      if (a == true) {
                                         updatewbsandproject(proid,pdate);
                                       }

                                  }
                                }
                              });
            }

            

            function submitwbs() {
              resetError();
              var successWbsDetails = $('#successWbsDetails');
                var flag = $('#flaghide').val();
                //alert(flag);
                if (flag == 1) {
                   // messageBox('WBS Updated Successfully');
                }
                if ('<%=flag%>' == '0') {
                    confirmBox3("submitwbsModal(1)","submitwbsModal(0)",9);
                    /*var r = confirm("Do you want to create more WBS ?");*/
                }
                if ('<%=flag%>' != '0') 
                addWbs12();
            }

            var submitwbsModal = function(flag) {
                    if(flag == 1) {
                        $('#wbshidden').val(1);
                    } else {
                        $('#wbshidden').val(0);
                    }
                  
                      addWbs12();
            
                    
            }

            function addWbs1() {

           
                  if($("#idhide").val() == 0){
                       submitwbs();
                }
                else{
                  
                  /* $.ajax({
                            url: '/checkProjectWbsDate',
                            type: 'post',
                            data: {"pid": $("#proname").val(), "wid":$("#idhide").val(), "psdate": '0', "pedate": '0',
                            "wpsdate":$("#datepicker").val(),"wpedate":$("#datepicker1").val(),flag:2
                                  },
                            success: function(data) {
                              
                                if(data[0][0].msg==0){*/
                                            //addWbs12();

                                            submitwbs();
                              /*  }
                                else{
                                  messageBox('date validations of WBS are not according to Assignment');
                                }
                            }

                        });*/
                }
            

            }






            function addWbs12(){
              document.getElementById("wbsbuton").disabled = true;
              //alert('flag--'+$('#flaghide').val());
              //alert('wbshidden--'+$('#wbshidden').val());
              if($('input:radio[name=wbsstatus]:checked').val()==0){
                activeInactive1onedit($("#idhide").val(),1,4);
              }
              

                              $.ajax({
                                url: '/addEditWbsDetails',
                                method: 'POST',
                                data: {
                              
                                 
                                  "wbshidden": $("#wbshidden").val(),
                                  "assign": $('#assign').val(),
                                  "flaghide": $("#flaghide").val(),
                                  "wbsidhide": $("#idhide").val(),
                                  "wbsname": $("#wbsname").val(),
                                  "wbscode":$("#wbscode").val(),
                                  "proname": $("#proname").val(),
                                  "wbsowner": $("#wbsowner").val(),
                                   "wbspsdate": $("#datepickerw").val(),
                                  "wbspedate": $('#datepickerw1').val(),
                                  "wbsasdate": $("#datepickerw2").val(),
                                   "wbsaedate": $('#datepickerw3').val(),
                                   "wbsstatus": $('input:radio[name=wbsstatus]:checked').val(),
                                   "wbseffort": $('#wbseffort').val(),
                                   "wbseffort1": $('#wbseffort1').val(),
                                   "wbslocation": $('#wbslocation').val(),
                                   "typeValue": $('#typeValue').val(),
                                  },
                                  success: function(data) {
                                    
console.log(data,"wifi");
                                   document.getElementById("wbsbuton").disabled =false;
                                    if(data[1][0].flag>1){
                                      wbsprojname.push($("#pronameid").val());
                                      currentwbsname.push($("#wbsname").val());
                                       wstartdate.push($("#datepickerw").val());
                                          wendDate.push($('#datepickerw1').val());
                                       $('#project'+$("#proname").val()+'').append('<li class="parent active"><a id="wbs_Anchor'+data[1][0].flag+'" onclick="showhide('+data[1][0].flag+',3,45,this)"><span class="fa fa-tasks" style="font-size:15px;color:green;padding-right:10px"></span>'+$("#wbsname").val()+'</a><div class="hide anvi" id="divw'+data[1][0].flag+'" style="margin-left: 165px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[1][0].flag+'" value="1"><span onclick="Editwbsdetail('+data[1][0].flag+')" title="edit Wbs" class="glyphicon glyphicon-edit" style="color:red;font-size: 15px"></span><span onclick="addassignmentinwbs('+data[1][0].flag+','+(wbsprojname.length-1)+','+$("#proname").val()+','+data[1][0].flag+')" title="Add Asssignment" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span></span><span id="activeWbs'+data[1][0].flag+'"onclick="activeInactive('+data[1][0].flag+',1,3,this)" title="Deactivate WBS" class="glyphicon glyphicon-ok-sign  " style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveWbs'+data[1][0].flag+'" title="Activate WBS" onclick="activeInactive('+data[1][0].flag+',0,3,this)"class="glyphicon  glyphicon-remove-sign hide  " style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul style="display:block" id="wbs'+data[1][0].flag+'"></ul></li>');
                                       if(data[2].length>1){
                                        for(var i=0;i<data[2].length;i++){
                                           $('#wbs'+data[2][i].WBSID+'').append('<li class=""><a id="'+data[2][i].id+'" class="c'+data[2][i].cname+' p'+data[2][i].ProjectId+' w'+data[2][i].WBSID+'" onclick="showhide('+data[2][i].id+',4,'+data[2][i].wact+',this)"><span class="fa fa-user" style="font-size:15px;color:green;padding-right:10px"></span>'+data[2][i].name+'</a><div class="hide anvi c'+data[2][i].cname+' pd'+data[2][i].ProjectId+' wd'+data[2][i].WBSID+'" id="divs'+data[2][i].id+'" style="margin-left: 165px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[2][i].id+'" value="1"><span onclick="Editassignment('+data[2][i].id+')" class="glyphicon glyphicon-edit hide" style="color:red;font-size: 15px"></span><span id="activeAssignment'+data[2][i].id+'" title="Deactivate Assignment" onclick="activeInactive('+data[2][i].id+',1,4,this)"class="glyphicon glyphicon-ok-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveAssignment'+data[2][i].id+'" title="Activate Assignment" onclick="activeInactive('+data[2][i].id+',0,4,this)"class="glyphicon  glyphicon-remove-sign hide " style="color:red;font-size: 15px;margin-left: 20px"></span></div></li>');

                                        }

                                       }
                                       messageBox('WBS Added Successfully');
                                      showaddwbsform($("#proname").val(),(currentprojname.length-1))

                                    }
                                      
                                      else{
                                  console.log($("#wbshidden").val(),"qwerty");  
                                  $('#wbs_Anchor'+$("#wbshidden").val()+'').text($('#wbsname').val());
                                        messageBox('WBS Updated Successfully');
                                       showwbs($("#proname").val());
                                      }

                                      $('.se-pre-con').fadeOut('slow');

                                  }
                            });
            }




            function allWbs() {
              resetError();
              var errorWbsname = $('#errorWbsname');
             
             myFunction();
            }


            function changeAssignmentDate(ides,flag){
              var assignmentDate='';
              if(flag==1){
               assignmentDate=$('#extSdate'.concat(ides)).val();}
               else {
               assignmentDate=$('#extEdate'.concat(ides)).val();}

               if((new Date(assignmentDate)>new Date($('#datepickerw1').val()))&&(flag==1)){
                alert("Assignment Start Date is grater then wbs End Date");
                return false;
               }
               else if((new Date(assignmentDate)>new Date($('#datepickerw1').val()))&&(flag==2)){

                 var a = confirm("Assignment End Date is grater then Wbs End Date Are you sure you want to update Wbs Planned End Date?");
                        if (a == true) {
                           updatewbsDate();
                        }
                
                return false;
               }
               else{

               $.ajax({
                    url: '/changeAssignmentDate',
                    method: 'POST',
                    data: {
                        "assid": ides,
                        "flag": flag,
                        "assgnDate": assignmentDate
                    },
                    success: function(data) {
                     }
                    });
             }

            }

                

            function getAllWbs(pid) {

              if($('#assign').val() == 1){
                checkUsers();
              }
                $("#datepicker").datetimepicker("destroy");
                $("#datepicker1").datetimepicker("destroy");
                //alert('pid---'+pid);

                $.ajax({
                    url: '/getAllWbsForProject',
                    method: 'POST',
                    data: {
                        "pid": pid
                    },
                    success: function(data) {
                        console.log('success', data);
                        var log = '',
                            log1 = '',
                            log2 = '';

                        for (var i = data[0].length - 1; i >= 0; i--) {
                            if (data[0][i].WBSName == null) {
                                data[0][i].WBSName = '';
                            }
                            if (data[0][i].WBSCode == null) {
                                data[0][i].WBSCode = '';
                            }
                            if (data[0][i].wplannedStartDate == null) {
                                data[0][i].wplannedStartDate = '';
                            }
                            if (data[0][i].wplannedEndDate == null) {
                                data[0][i].wplannedEndDate = '';
                            }
                            if (data[0][i].wactualStartDate == null || data[0][i].wactualStartDate == '00/00/00') {
                                data[0][i].wactualStartDate = '';
                            }
                            if (data[0][i].wactualEndDate == null || data[0][i].wactualEndDate == '00/00/00') {
                                data[0][i].wactualEndDate = '';
                            }

                            log = log + '<tr style=height:20px;color:grey;font-size:12px;  id="abc_' + data[0][i].WBSId + '"><td>' + data[0][i].WBSName + '</td><td>' + data[0][i].WBSCode + '</td><td>' + data[0][i].wplannedStartDate + '</td><td>' + data[0][i].wplannedEndDate + '</td><td>' + data[0][i].wactualStartDate + '</td><td>' + data[0][i].wactualEndDate + '</td></tr>';


                        }
                        // console.log('log---',log);
                        otable.fnDestroy();
                        $('#tb').html(log);
                        otable = $('#wbstable').dataTable({
                            'iDisplayLength': 10,
                            "order": [],
                    "bFilter": false,"bInfo": false,"bLengthChange": false
                        });
                        if (0 == 0) {
                            /*$('#datepicker').val('05/05/2015');*/
                            $('#datepicker').val(data[1][0].plannedStartDate);
                            $('#datepicker1').val(data[1][0].plannedEndDate);
                            var text = $('#datepicker').val();
                            var date = new Date(text);
                            var text1 = $('#datepicker1').val();
                            var date1 = new Date(text1);


                            var date = formatDate(date);
                            var date1 = formatDate(date1);
                            var date=new Date(date);
                            var date1=new Date(date1);

                            console.log('text----',text);
                            console.log('text1----',text1);
                            console.log('date----',date);
                            console.log('date1----',date1);

                            if (text != '' && text1 != '') {
                                $("#datepicker").datetimepicker({
                                    timepicker: false,
                                    minDate: date,
                                    maxDate: date1,
                                    format: 'm/d/y',
                                    scrollMouse: false,
                                    scrollInput: false
                                });
                                $("#datepicker1").datetimepicker({
                                    timepicker: false,
                                    minDate: date,
                                    maxDate: date1,
                                    format: 'm/d/y',
                                    scrollMouse: false,
                                    scrollInput: false
                                });
                            } else {
                                $("#datepicker").datetimepicker({
                                    timepicker: false,
                                    format: 'm/d/y',
                                    scrollMouse: false,
                                    scrollInput: false
                                });
                                $("#datepicker1").datetimepicker({
                                    timepicker: false,
                                    format: 'm/d/y',
                                    scrollMouse: false,
                                    scrollInput: false
                                });
                            }
                        } else {
                            /*$('#datepicker').val(data[1][0].plannedStartDate);
                            $('#datepicker1').val(data[1][0].plannedEndDate);*/
                            var text = data[1][0].plannedStartDate;
                            var text1 = data[1][0].plannedEndDate;
                            var date = new Date(text);
                            var date1 = new Date(text1);

                            var date = formatDate(date);
                            var date1 = formatDate(date1);
                            var date=new Date(date);
                            var date1=new Date(date1);

                            
                            $("#datepicker").datetimepicker({
                                timepicker: false,
                                minDate: date,
                                maxDate: date1,
                                format: 'm/d/y',
                                scrollMouse: false,
                                scrollInput: false
                            });


                            $("#datepicker1").datetimepicker({
                                timepicker: false,
                                minDate: date,
                                maxDate: date1,
                                format: 'm/d/y',
                                scrollMouse: false,
                                scrollInput: false
                            });

                        }
                    }

                });


            }


            function formatDate(date) {
                  date1=date.getFullYear();
                 if (date1 < 1970) {
                              date.setFullYear(date1 + 100);
                          } 

                    var d = new Date(date),
                        month = '' + (d.getMonth() + 1),
                        day = '' + d.getDate(),
                        year = d.getFullYear();
                       
                    if (month.length < 2) month = '0' + month;
                    if (day.length < 2) day = '0' + day;

                    return [year, month, day].join('-');
                }




            function specialCharacter(evt) {
                var charCode = (evt.which) ? evt.which : event.keyCode
                if ((charCode != 38 && charCode > 32 && charCode < 46) || (charCode > 57 && charCode < 64) || charCode == 126 || charCode == 96) {
                    alert("This special character or number is not allowed\n ");
                    return false;
                }
                return true;
            }
  /*****************end wbs******************************/
/*******************client code**********************/
function addclient(){

var x=document.getElementById('addclientbutton');
x.disabled=true;
  if($('#cname').val()==""){
    $('#errorCname').append("This Field required");

  }
  else if($("#cabbname").val()==''){
   $('#errorCabbname').append("This Field required");
  }
  else{

      $.ajax({

                                url: '/addEditClient111',
                                method: 'POST',
                                data: {
                                  "ccode":$('#ccode').val(),
                                  "hiddeneditflag":0,
                                  "hiddenid": $('#hiddenid').val(),
                                  "cname": $('#cname').val(),
                                  "cabbname": $("#cabbname").val(),
                                  "category": $("#category").val(),
                                  "cal": $("#cal").val(),
                                  "clocation":$("#clocation").val(),
                                  "caddress": $("#caddress").val(),
                                  "ccontactperson":'a' ,
                                  "ccperemail": 'a',
                                  "clconphone": '12',
                                  "active": 1
                               
                                  },
                                  success: function(data) {
                                    document.getElementById('addclientbutton').disabled=false;
                                    var log='';
                                    
                                    if($('#hiddenid').val()==0){
                                   $('#createclientcontect').html('');
                               
                                      $('#createclientcontect').append('<button title="Create Client Contect" class="btn btn-primary" style="background-color: #f05f40;"   data-toggle="modal" data-target="#myModal" onclick="addEditContacts(0,'+data[1][0].flag+')">Create Contact</button>');
                                      getContacts(data[1][0].flag);

                                      log=log+'<li class="parent active"><a id="client_Anchor'+data[1][0].flag+'" onclick="showhide('+data[1][0].flag+',1,1,this)"><span class="fa fa-folder" style="font-size:15px;color:green;padding-right:10px"></span>'+$('#cname').val()+'</a><div class="hide anvi" id="divclient'+data[1][0].flag+'" style="margin-left: 212px;width:100px;margin-top: -22px"><input type="hidden" id="tet'+data[1][0].flag+'" value="'+$('#cname').val()+'"><input type="hidden" id="in'+data[1][0].flag+'" value="1"><span onclick="clientsEdit('+data[1][0].flag+',1)" title="Edit Client" class="glyphicon glyphicon-edit" style="color:red;font-size: 15px"></span><span title="Add Project" onclick="showaddprojectform('+data[1][0].flag+',1)" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span  id="activeClient'+data[1][0].flag+'" onclick="activeInactive('+data[1][0].flag+',1,1,this)" title="Deactivate Client" class="glyphicon glyphicon-ok-sign" style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveClient'+data[1][0].flag+'" title="Activate Client" onclick="activeInactive('+data[1][0].flag+',0,1,this)" class="glyphicon  glyphicon-remove-sign hide" style="color:red;font-size: 15px;margin-left: 20px"></span></div><ul id="client'+data[1][0].flag+'" style="display:block"></ul></li>';
                                       $('#treeul').append(log);
                                    messageBox("Client Added Successfully");
                                    showclient();
                                  }
                                    else{

                  $('#client_Anchor'+$('#hiddenid').val()+'').text($('#cname').val());
                                      messageBox(" Client Updated Successfully");
                                      showclient();
                                    }

  }

});
    }
  }

     function getContacts(clientId){
      
           // $("#clientcontect").removeClass('hide');
              $('#showallclient').addClass('hide');
                
                 $("#projectadd").addClass('hide');
                 $("#addwbs").addClass('hide');
                 $("#aa").addClass('hide');
            $(".rows").removeClass('active-row');
            //$("#"+rowId).addClass('active-row');

                            var ch = '';
                            $.ajax({
                                url: 'getClientContacts',
                                data: {
                                    'clientid': clientId
                                },
                                method: 'post',
                                success: function(pdetails) {
                                    console.log("karry",pdetails)
                                    if(otableclint != null)otableclint.fnDestroy();
                                    $('#client-contact-body').html(ch);
                                    for (var i = 0; i < pdetails.length; i++) {                                 
                                        ch = ch+'<tr id = "row_'+pdetails[i].id + '"><td style = "width:20%">' + pdetails[i].Name + '</td><td>' + pdetails[i].emailId + '</td><td style = "width:20%">' + pdetails[i].contactNum + '</td><td style = "width:20%">' + pdetails[i].clientName + '</td><td style = "width:20%" id = "con_' + i + '">' + pdetails[i].clientCode + '</td>';
                     
                     if(pdetails[i].isActive==1){
                                       ch=ch+'</td><td style = "width:20%" id="block'+pdetails[i].id+'"><i class="glyphicon glyphicon-pencil  " style = "font-size:130%;color:#555555" data-toggle="modal" data-target="#myModal"  title = "Edit" id = "edit_' + pdetails[i].id + '_' + i + '" onclick = "addEditContacts('+pdetails[i].id+','+pdetails[i].clientId+')"></i> <i class="glyphicon glyphicon-envelope" style = "font-size:130%;color:#555555; margin-left:10px"  title = "Send mail" id = "mail' + pdetails[i].id + '_' + i + '" onclick=confirmBox2("'+pdetails[i].id+'","sendMail",6);></i><i class="glyphicon glyphicon-ban-circle" style = "font-size:130%;color:#555555; margin-left:10px"  title = "Block access" id = "block' + pdetails[i].id + '_' + i + '" onclick =confirmBox2("'+pdetails[i].id+'","blockUser",5);></i></td></tr>';
                                   }
                                   else
                                   {
ch+='<td style="color:red">Blocked</td></tr>';
                                   }
                                    }


        $('#client-contact-body').html(ch);
      
         otableclint=$('#client-contact-table').dataTable({
               'iDisplayLength': 10,
                "order":[],
                "bDestroy": true, 
                "info":false,
            });


                     
                                }
                            });





        }


           var resetError = function() {
      $('.error').text("");
      $('.success').text('');
      }

      function sendMail(id)
{ 
              $('.se-pre-con').show();
                        $.ajax({
                                url: 'sendMailClient',
                                data: {
                                    'id':id
                                },
                                method: 'post',
                                success: function(pdetails) {
                                 $('.se-pre-con').hide();  
                                messageBox('Mail has been sent successfully.')
                                }
                            });
}

        function addEditContacts(id,clientId)
        {

var rowId="row_"+id;
     $("#cemail").prop('disabled',false);
$(".clearAll").val('');
if(id>0)
{
    var name=document.getElementById("client-contact-table").rows[rowId].cells.item(0).innerHTML;
var mail=document.getElementById("client-contact-table").rows[rowId].cells.item(1).innerHTML;
var con=document.getElementById("client-contact-table").rows[rowId].cells.item(2).innerHTML;
    $("#coname").val(name);
    $("#cocontact").val(con);
    $("#cemail").val( mail);
     $("#cemail").prop('disabled',true);
   
}
 $("#cclientid").val(clientId);
  $("#cflag").val(id);

        }
//**************//
  function createEditContact()
        {

         resetError();  
          var errorCname = $('#errorConame');
          var errorEmail = $('#errorCemail');
          var errorContact = $('#errorCocontact'); 
          var errorMyModal= $('#errorMyModal');
          var successMyModal= $('#successMyModal');

var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

 var numreg = /^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/;


if($("#coname").val().trim().length<=0)
{
    $("#coname").focus();
    errorCname.text('Required Field');
    return ;
}

if($("#cemail").val().trim().length<=0)
{
    errorEmail.text('Required Field');
    $("#cemail").focus();
    return ;
}

if($("#cemail").val().trim().length !=0 && !(re.test($("#cemail").val())))
{
    errorEmail.text('Enter valid email-id');
    $("#cemail").focus();
    return ;
}
if($("#cocontact").val().trim().length <=0 )
{
    errorContact.text('Required Field');
    $("#cocontact").focus();
    return ;
}
/*if($("#ccontact").val().trim().length!=0 && isNaN($("#ccontact").val()))
{
    errorContact.text('Enter valid contact no');
    $("#cocontact").focus();
    return ;
}*/
/*if($("#ccontact").val().trim().length!=0 && ($("#ccontact").val().length !=10))
{
    errorContact.text('Enter valid contact no');
    $("#cocontact").focus();
    return ;
}*/

                         $.ajax({
                                url: 'addeditClientContacts',
                                data: {
                                    'cname': $("#coname").val(),
                                    'cemail': $("#cemail").val(),
                                    'ccontact': $("#cocontact").val(),
                                    'clientId':$("#cclientid").val(),
                                    'id':$("#cflag").val()

                                },
                                method: 'post',
                                success: function(pdetails) {
                                    acd=pdetails;
                                    console.log(pdetails,'shaly');
                                 
                           /*       if(pdetails[0][0].flag=='-1')*/
                                    if(pdetails[1][0].flag=='1')
                                    {
                                        successMyModal.text('Successfully Created');
                                        setTimeout(function(){
                                            successMyModal.text('');
                                          getContacts($("#cclientid").val());
                                        },1000);
                                        
                                   }
                                   else
                                    if(pdetails[1][0].flag=='2')
                                    {
                                          successMyModal.text('Successfully Updated.');
                                          setTimeout(function(){
                                            successMyModal.text('');
                                           getContacts($("#cclientid").val());
                                        },50);
                                    }
                                    else
                                    {
                                        errorMyModal.text('Email id already exist');

                                    }
                                }
                            });

        }

        function blockUser(id)
     {
        $.ajax({
                url: 'blockUser',
                data: {
                    'id':id
                },
                method: 'post',
                success: function(pdetails) {
                 $("#block"+id+"").html('');
                 $("#block"+id+"").append('Blocked');
                 $("#block"+id+"").css("color","red");
                messageBox('User has been deactivated successfully.');

               // window.location.reload();
                }
        });



}

/**************ende client code********************/

/******************show allclient*************/
    function showclient() {
      var flag1=<%=clientflag%>;
   
                         var no=0;
                       var totaltime=0;
                        $("#addclient").addClass('hide');
                       $("#projectadd").addClass('hide');
                       $("#addwbs").addClass('hide');
                       $("#aa").addClass('hide');
                       // claimid = "";
                       // $('#backbuton').addClass('hide');
                        $('#showallclient').removeClass('hide');
                        //$('#accordionshome').removeClass('hide');
                       
                       
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/showclients',
                                type: 'post',
                              data:{"flag":flag1},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                             
                                  console.log('fetching clientlist',users);
                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>Client Name</th>" + "<th>Time</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                         no=i+1;
                                      totaltime=totaltime+users[i].total;
                                      
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].clientName + "' id='l" + users[i].clientName+ "'>" + "<td >" + users[i].clientName + "</td>" + "<td >" + users[i].total + "</td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#homeTable").dataTable().fnDestroy();
                                    $("#homeTable").html('');

                                    $("#homeTable").html(log);
                                    $("#homeTable").dataTable({
                                      "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });
                                
                       $('#totalclient').html("Total Client :");
                       //$('#totalclient').append("Total Client");
                       $('#totalno').html('');
                       $('#totalno').append(no)
                       $('#totaltime').html('');
                       $('#totaltime').append(totaltime);
                                }

                            }));
                        }

                      

                    }
/*************show client*************/
/******************show project*************/
    function showproject(clientid) {
       var flag1=<%=clientflag%>;
                        var no=0;
                       var totaltime=0;
                       $("#addclient").addClass('hide');
                       $("#projectadd").addClass('hide');
                       $("#addwbs").addClass('hide');
                       $("#aa").addClass('hide');
                      // alert("helo"); 
                       // claimid = "";
                       // $('#backbuton').addClass('hide');
                        $('#showallclient').removeClass('hide');
                        //$('#accordionshome').removeClass('hide');
                       
                       
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/showprojects',
                                type: 'post',
                                data:{"clientid":clientid,flag:flag1},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                             console.log('fetching projectlist',users);

                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>Project Name</th>" + "<th>Time</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                         no=i+1;
                                      totaltime=totaltime+users[i].total;
                                      
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].projectTitle + "' id='l" + users[i].projectTitle+ "'>" + "<td >" + users[i].projectTitle+ "</td>" + "<td >" + users[i].total + "</td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#homeTable").dataTable().fnDestroy();
                                    $("#homeTable").html('');

                                    $("#homeTable").html(log);
                                    $("#homeTable").dataTable({
                                        "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": true,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });

                                     $('#totalclient').html('Total Project :');
                      // $('#totalclient').append("Total Project");
                       $('#totalno').html('');
                       $('#totalno').append(no)
                       $('#totaltime').html('');
                       $('#totaltime').append(totaltime);

                                }

                            }));
                        }


                    }

  function cancelassign(){
    $('#aa').addClass('hide');
  }                  
/*************show project*************/
  function submitdata(){

    var errorDatepicker = $('#errorDatepicker');
    var errorDatepicker1= $('#errorDatepicker1');
    var errorProcode = $('#errorProcode');
    var errorAsd = $('#errorAsd');
    var errorWbs2 = $('#errorWbs2');
    var errorCreateAssignment= $('#errorCreateAssignment');
var alluser=[];
    var startDt=document.getElementById("asdatepicker").value;
var endDt=document.getElementById("asdatepicker1").value;


    var s = document.getElementById("asd");
  //  alert("length of s is"+s.options.length);
    for (var i = 0; i < s.options.length; i++) {
         if (s.options[i].selected == true) {
           var user = s.options[i].value;
           alluser.push(user);
           
         }
        
    } 

    if($('#procode').val()== "")
     {
      errorProcode.text("Required field"); 
      return false;}
    if($('#wbs2').val()==0)
     { errorWbs2.text("Required field"); 
      return false;  }


 for (var i = 0; i < s.options.length; i++) {
         if (s.options[i].selected == true) {
          
           var user = s.options[i].value;
           var wb=$('#wbs2').val();
           /*for(var j=0;j<usersid.length;j++){ 
           
         /* if(usersid[i]==user){
         errorCreateAssignment.text(" select person has been already asssigned a assignment on this document");
              return false;
           }*/
        /* }*/
       }
        
    } 



       if($('#asdatepicker').val()==null)
     { errorDatepicker.text("Please select a StartDate"); 
      return false;  }
     if($('#asdatepicker1').val()==null)
     { errorDatepicker1.text("Please select a EndDate"); 
      return false;  }

    var r = document.getElementsByName("status")
    var c = -1;
    for(var i=0; i < r.length; i++){
     if(r[i].checked) {
      c = i; 
                     }
        }
   if (c == -1)
    { messageBox("Please Select Status"); 
     return false;}


       if($('#asd').val()==null)
     { errorAsd.text("Please Select Users"); 
      return false;  }
      
      var text = $('#asdatepicker').val();
      var text1 = $('#asdatepicker1').val();

    if(text==''){errorDatepicker.text("Please Select Assignment Start Date"); return false;}
      if(text1==''){errorDatepicker1.text("Please Select Assignment End Date"); return false;}
      if(new Date(text)>new Date(text1)){errorDatepicker1.text('Assignment End Date can not be less than Assignment Start Date');return false;}
     
      if(new Date(text) <new Date(wbsSdate)){
       messageBox("Assignment Start Date is less than WBS Start Date"); return false;
      }
        if(new Date(text)> new Date(wbsEdate)){
        messageBox("Assignment Start Date is greater then WBS Start Date"); return false;
      }
        if(new Date(text1)> new Date(wbsEdate)){
         //messageBox(" Assignment End Date is grater then Wbs End Date"); return false;
         var a = confirm("Assignment End Date is grater then Wbs End Date Are you sure you want to update Wbs Planned End Date?");
                        if (a == true) {
                           updatewbsDate();
                        }
                        return false;
      }
    
var td= new Date();
  var dd=td.getDate();
  var mm=td.getMonth();
  mm=mm+1;
  var yr=td.getFullYear();
  st_ed_date=mm+"/"+dd+"/"+yr;

document.getElementById("assignbutton").disabled=true;
     $.ajax({        
                    url:'/submitAssignmenttree',
                    type:'post',
                    data:{
                      "flag":$("#flagid").val(),
                      "assignmentId":$("#assignmentId").val(),
                      "procode":$('#procode').val(),
                      "wbs":$('#wbs2').val(),
                      "user":alluser.toString(),
                      "status":$("input[type='radio'][name='status']:checked").val(),
                      "asdate":$('#asdatepicker').val(),
                      "aedate":$('#asdatepicker1').val(),
                        "curdat":st_ed_date
                    },

                  success:function(data){
                    console.log("mydata",data);
                   console.log(data[0][0].id,'sfvdfvalue');
                    document.getElementById("assignbutton").disabled=false;
console.log("checkin flag value",$("#flagid").val());
                   /* addassignmentinwbs($('#wbs2').val(),$("#flagid").val(),$('#procode').val())
                    $('#wbs'+$('#wbs2').val()+'').html('');
                    $('#wbs'+$('#wbs2').val()+'').addClass('parent');
                     $('#wbs'+$('#wbs2').val()+'').addClass('active');*/
                    if($("#flagid").val()==1){
                      $('#assignment_Anchor'+data[0][0].id+'').text($('#asd').text());
                      messageBox('Assignment Updated Successfully');
                      showassgnment(data[0][0].WBSID);

                      
                    }
                    else{
                       for( var i=0;i<data[0].length;i++){
                     
                  $('#wbs'+data[0][i].WBSID+'').append('<li class=""><a id="assignment_Anchor'+data[0][i].id+'" class="c'+data[0][i].cname+' p'+data[0][i].ProjectId+' w'+data[0][i].WBSID+'" onclick="showhide('+data[0][i].id+',4,'+data[0][i].wact+',this)"><span class="fa fa-user" style="font-size:15px;color:green;padding-right:10px"></span>'+data[0][i].name+'</a><div class="hide anvi c'+data[0][i].cname+' pd'+data[0][i].ProjectId+' wd'+data[0][i].WBSID+'" id="divs'+data[0][i].id+'" style="margin-left: 165px;width:100px;margin-top: -22px"><input type="hidden" id="in'+data[0][i].id+'" value="1"><span onclick="Editassignment('+data[0][i].id+')" class="glyphicon glyphicon-edit hide" style="color:red;font-size: 15px"></span><span id="activeAssignment'+data[0][i].id+'" title="Deactivate Assignment" onclick="activeInactive('+data[0][i].id+',1,4,this)"class="glyphicon glyphicon-ok-sign  " style="color:green;font-size: 15px;margin-left: 20px"></span><span id="inactiveAssignment'+data[0][i].id+'"title="Activate Assignment" onclick="activeInactive('+data[0][i].id+',0,4,this)"class="glyphicon  glyphicon-remove-sign hide " style="color:red;font-size: 15px;margin-left: 20px"></span></div></li>');
                        }
                      messageBox('Assignment Added Successfully');
      
                       showassgnment(data[0][0].WBSID);
                    }
                    }
                  });
}

/******************show wbs*************/
    function showwbs(projectid) {
                        var no=0;
                       var totaltime=0; 
                        $("#addclient").addClass('hide');
                       $("#projectadd").addClass('hide');
                       $("#addwbs").addClass('hide');
                       $("#aa").addClass('hide');
                       // claimid = "";
                       // $('#backbuton').addClass('hide');
                        $('#showallclient').removeClass('hide');
                        //$('#accordionshome').removeClass('hide');
                       
                       
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/showwbs',
                                type: 'post',
                              data:{"projectid":projectid},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                             console.log('fetching users in wbs list',users);

                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>Wbs Name</th>" + "<th>Time</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                         no=i+1;
                                      totaltime=totaltime+users[i].total;
                                      
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].WBSName + "' id='l" + users[i].WBSName+ "'>" + "<td >" + users[i].WBSName + "</td>" + "<td >" + users[i].total + "</td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#homeTable").dataTable().fnDestroy();
                                    $("#homeTable").html('');

                                    $("#homeTable").html(log);
                                    $("#homeTable").dataTable({
                                      "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });

                       $('#totalclient').html('');
                       $('#totalclient').append("Total WBS :");
                       $('#totalno').html('');
                       $('#totalno').append(no)
                       $('#totaltime').html('');
                       $('#totaltime').append(totaltime);

                                }

                            }));
                        }

                       

                    }
/*************show wbs*************/

/******************show assignment*************/
    function showassgnment(wbsid) {
                       var no=0;
                       var totaltime=0;
                        $("#addclient").addClass('hide');
                       $("#projectadd").addClass('hide');
                       $("#addwbs").addClass('hide');
                       $("#aa").addClass('hide');
                       // claimid = "";
                       // $('#backbuton').addClass('hide');
                       
                        $('#showallclient').removeClass('hide');
                        //$('#accordionshome').removeClass('hide');
                       
                       
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/showassignment',
                                type: 'post',
                                data:{"wbsid":wbsid},
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                             
                                    console.log('fetch assignment list',users);
                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>User Name</th>" + "<th>Time</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                       no=i+1;
                                      totaltime=totaltime+users[i].total;
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].name + "' id='l" + users[i].clientName+ "'>" + "<td >" + users[i].name + "</td>" + "<td >" + users[i].total + "</td>" ;
                                      

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#homeTable").dataTable().fnDestroy();
                                    $("#homeTable").html('');

                                    $("#homeTable").html(log);
                                    $("#homeTable").dataTable({
                                      "aLengthMenu": [[5,10,20,50,100,-1],["5","10", "20","50","100","all"]],
                                         'iDisplayLength': 5,
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        },  {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });

                       $('#totalclient').html('');
                       $('#totalclient').append("Total Assignment :");
                       $('#totalno').html('');
                       $('#totalno').append(no)
                       $('#totaltime').html('');
                       $('#totaltime').append(totaltime);

                                }

                            }));
                        }

                       

                    }
/*************show assignment*************/
function showactiveproject(){
  window.location.href="/projecttreeview"

}

function showinactiveproject(){
 window.location.href="/inactiveclient"
}


</script>




</head>
<body>
 <div>
            <% include ./partials/adminheader %>
             <% include ./partials/setting-header %>
        </div>
<div id="ModalAdd"></div>
<div id="ModalAddMesage"></div>
 <div class="row secondry-color">

<!--div id="wrapper" style="margin-left: -245px;margin-top: 24px"-->
<div class="tree col-md-4" style="overflow-y: scroll; height:660px;width:430px;margin-top: -19px;
">
    <button id="all" class="hide">Project</button>
 <div style="margin-left:40px" ><input type="radio" id="actproject" name="" onclick="showactiveproject()"   style="margin-top:3%" > Active
              <input type="radio" id="actprojectin" name="" onclick="showinactiveproject()"   style="margin-top:3%;"> Inactive</div>  
<ul ><li id="treeview"><a onclick="showhide('00',0)"><span class="fa fa-university" style="color:green;font-size: 15px;padding-right:10px"></span>All Clients</a><div class="hide anvi" id="div00" style="margin-left: 268px;width:200px;margin-top: -22px"><input type="hidden" id="in00" value="1"><span title="Add Client" onclick="showclientform()" class="glyphicon glyphicon-plus-sign" style="color:green;font-size: 15px;margin-left: 20px"></span></div></li></ul>
 
</div>
<!--/div-->


<!--add project data-->

 <div id="projectadd" class="container-fluid user-list  col-md-8 hide"  style="float:right; margin-top:-655px">
    <div  style="margin-top:1%">
    <span class="modal-title" style="padding-left:45%">Project Details</span>
    <!--form id="projectform" method="post">
     <div id="ModalAdd"></div>
  <div id="ModalAddMesage"></div>
    <!--span title="Go To project List" onclick="document.location.href='/projectDetails';" style="float:left;width: 25px;height: 30px;font-size: 20px;color:green;"  class="glyphicon glyphicon-arrow-left"></span>
      <span class="modal-title" style="margin-left:42%"><%if(flag==0){%>Add Project Details<%} else{%>Edit Project Details.<%}%></span--> </div>
      <main>
        
      <input type="hidden" id="tabDetail" name="tabDetail">
      <input type="hidden" id="pid" name="pid" <%if(flag==1){%>value='<%=name[0].id%>' <%} else{%> value=0 <%}%>>
      <input type="hidden" id="hdnId" name="hdnId" <%if(flag==1){ %>value='<%=flag%>' <%} else{%> value=0 <%}%>> 
      <input id="tab1" class="tabradio" type="radio" name="tabs" value="1" onclick="handleClick(this);" checked> <label for="tab1">Basic Details</label> 
       <input id="tab2" class="tabradio" type="radio" name="tabs" value="2" onclick="handleClick(this);" > 
       <label for="tab2">Project Data</label>
      <input id="tab5" class="tabradio"   type="radio" name="tabs" value="3" onclick="handleClick(this);"  > 
      <label for="tab5">Billing</label>

      <section id="content1">
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Project Name:<sup  class="astrick">*</sup></label>
            <input type="text"   placeholder=" Enter Project Name " class="form-control input-sm"  style=""  name="pname" id ="idpname" maxlength="50" onblur=" myFunction1(); " <%if(flag==1){%>value='<%=name[0].projectTitle%>'<%}%>>
                <div class="fLeft"><span class="error" id="errorIdpname"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Project Code:</label>
            <input type="text" style="" class="form-control input-sm" placeholder="Project Code" name="pcode" id ="pcode" onkeypress="return specialCharacter(event)" <%if(flag==1){%>value='<%=name[0].pcode%>' <%}%> readonly>
                <div class="fLeft"><span class="error" id="errorPcode"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Client:<sup  class="astrick">*</sup></label>
            <input type="hidden" class="form-control input-sm" style=""  name="pclient" id ="pclient" > 
              <input type="text" class="form-control" style=""  name="pclientte" id ="pclienttet" >
              <div class="fLeft"><span class="error" id="errorPclient"></span></div>
          </div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
           <label>Client Contact Person:</label>
              <div id="contactDiv">
                <select multiple="multiple" class="form-control input-sm chosen-select" style=""  name="ccontact" id ="ccontact"> 
                </select> 
                <div class="fLeft"><span class="error" id="errorCcontact"></span></div>
              </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Technology:<sup  class="astrick">*</sup></label>
             <select multiple="multiple" class="form-control input-sm chosen-select" style="" name="ptech" id ="ptech" maxlength="50" placeholder="Choose Project Technology..."> 
              <option  value='0' disabled selected>Select</option>
                <% for(var i=0;i<tech.length;i++) {%>
                <option value="<%=tech[i].id%>"><%=tech[i].description1%></option>
                      <%}%>
              </select>
              <div class="fLeft"><span class="error" id="errorPtech"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Planned Start Date:<sup  class="astrick">*</sup></label>
             <input type="text" maxlength="20" placeholder="Select Date"  style=""   class= "form-control input-sm" id="datepicker" name="psdate" <%if(flag==1){%>value='<%=name[0].plannedStartDate%>'<%}%>>
                <div class="fLeft"><span class="error" id="errorDatepicker"></span></div>
          </div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
               <label>Planned End Date:<sup  class="astrick">*</sup></label>
            <input type="text" style=""  maxlength="20" placeholder="Select Date" name="pedate"  class="form-control input-sm" id ="datepicker1" <%if(flag==1){%>value='<%=name[0].plannedEndDate%>'  <%}%> >
                <div class="fLeft"><span class="error" id="errorDatepicker1"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
             <label>Complexity:</label>
            <select style="" class="form-control input-sm chosen-select" id ="pcomplexity" name="pcomplexity" data-placeholder="choose Complexity" >
                <option  value='0' disabled selected>Select</option>
                <option  value='simple'<%if(flag==1&&name[0].pcomplexity=='simple'){%>selected<%}%> > simple </option>
                <option  value='medium'<%if(flag==1&&name[0].pcomplexity=='medium'){%>selected<%}%> > medium </option>
                <option  value='complex'<%if(flag==1&&name[0].pcomplexity=='complex'){%>selected<%}%>> complex </option>
              </select>
              <div class="fLeft"><span class="error" id="errorPcomplexity"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Location:</label>
            <select class="form-control input-sm chosen-select" id ="plocation" name="plocation" >
                <option value='0' disabled selected >Select</option>
                  <% for(var i=0;i<location.length;i++) {%>
                <option value="<%=location[i].id%>"<%if(flag==1&&name[0].locid==location[i].id){%>selected<%}%> ><%=location[i].location%></option>
                  <%}%>
              </select>
              <div class="fLeft"><span class="error" id="errorPlocation"></span></div>
          </div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Description:</label>
            <textarea placeholder="Enter Project Description" id="DescriptionID" style="" class="form-control input-sm" row=2 name="pdescription" maxlength="250" onkeypress="" <%if(flag==1){%>value="<%=name[0].description%><%}%>"><%if(flag==1){%><%=name[0].description%><%}%></textarea> 
             <div class="fLeft"><span class="error" id="errorDescriptionID"></span></div> 
          </div>
                    <div class="col-lg-4 col-md-4 col-sm-6" id="pactive" <%if(flag==0 ){%> style="display:none"<%}%> >
            <label>Status:</label><br>
            <input type="radio" name="pstatus"  value= 1  id = "pstatus1" required  style="margin-top:3%" checkded="true"> Active
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" name="pstatus"  value= 0  id = "pstatus2" required  style="margin-top:3%;"> Inactive

          </div>
        </div>

        <!--       <table class="table form-table">
          <tr>
            <td>
              <td><label  style="padding:2%;color: #524A4A;font-size: 11px"> Project Name: <sup>*</sup> </label></td>
              <td><input type="text"   placeholder=" Enter Project Name  " class="form-control"  style=""  name="pname" id ="idpname" maxlength="50" onblur=" myFunction1(); " <%if(flag==1){%>value='<%=name[0].projectTitle%>' <%}%>>
                <div class="fLeft"><span class="error" id="errorIdpname"></span></div>
              </td>
            </td>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px" >Project Code:</label></td>
              <td> <input type="text" style="" class="form-control" placeholder="Project Code" name="pcode" id ="pcode" onkeypress="return specialCharacter(event)" <%if(flag==1){%>value='<%=name[0].pcode%>' <%}%> readonly>
                <div class="fLeft"><span class="error" id="errorPcode"></span></div>
              </td>
            </td>
           </tr>
            <tr>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Client: <sup>*</sup></label></td>
              <td>
              <input type="hidden" class="form-control" style=""  name="pclient" id ="pclient" > 
              <input type="text" class="form-control" style=""  name="pclientte" id ="pclienttet" >
              
              <div class="fLeft"><span class="error" id="errorPclient"></span></div>
              </td>
            </td>
          
            <td>
              <td class=""><label style="padding:2%;color: #524A4A;font-size: 11px">Client Contact Person:</label></td>
              <td class="">
              <div id="contactDiv">
               <select multiple="multiple" class="form-control" style=""  name="ccontact" id ="ccontact" data-placeholder="Choose Client Contect Person"> 
              </select> 
              <div class="fLeft"><span class="error" id="errorCcontact"></span></div>
              </div>
              </td>

              </td> 
            </tr>
          <tr>

          <td>
              <td style="width:110px"><label style="padding:2%;color: #524A4A;font-size: 11px">Technology: <sup>*</sup></label></td>
              <td id="idptechtd">
              <select multiple="multiple" class="form-control" style="" name="ptech" id ="ptech" maxlength="50" data-placeholder="Choose Project Technology..."> 
              <option  value='0' disabled selected>Select</option>
                <% for(var i=0;i<tech.length;i++) {%>
                <option value="<%=tech[i].id%>"><%=tech[i].description1%></option>
                      <%}%>
              </select>
              <div class="fLeft"><span class="error" id="errorPtech"></span></div>
              </td>
            </td>


            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Planned Start Date: <sup>*</sup></label></td>
              <td> <input type="text" maxlength="20" placeholder="Select Date"  style=""   class= "form-control" id="datepicker" name="psdate" <%if(flag==1){%>value='<%=name[0].plannedStartDate%>'<%}%>>
                <div class="fLeft"><span class="error" id="errorDatepicker"></span></div>
              </td>
            </td>
            </tr>
          <tr>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Planned End Date: <sup>*</sup></label></td>
              <td><input type="text" style=""  maxlength="20" placeholder="Select Date" name="pedate"  class="form-control" id ="datepicker1" <%if(flag==1){%>value='<%=name[0].plannedEndDate%>'  <%}%> >
                <div class="fLeft"><span class="error" id="errorDatepicker1"></span></div>
              </td>
            </td>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Complexity: </label></td>
              <td>
              <select style="" class="form-control" id ="pcomplexity" name="pcomplexity" data-placeholder="choose Complexity" >
                <option  value='0' disabled selected>Select</option>
                <option  value='simple'<%if(flag==1&&name[0].pcomplexity=='simple'){%>selected<%}%> > simple </option>
                <option  value='medium'<%if(flag==1&&name[0].pcomplexity=='medium'){%>selected<%}%> > medium </option>
                <option  value='complex'<%if(flag==1&&name[0].pcomplexity=='complex'){%>selected<%}%>> complex </option>
              </select>
              <div class="fLeft"><span class="error" id="errorPcomplexity"></span></div>
            </td>
            </td>
            
             </tr>
          <tr>

          <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px"> Location:</label></td>
              <td><select class="form-control" id ="plocation" name="plocation" data-placeholder="Choose location" >
                <option value='0' disabled selected >Select</option>
                  <% for(var i=0;i<location.length;i++) {%>
                <option value="<%=location[i].id%>"<%if(flag==1&&name[0].locid==location[i].id){%>selected<%}%> ><%=location[i].location%></option>
                  <%}%>
              </select>
              <div class="fLeft"><span class="error" id="errorPlocation"></span></div>
            </td>
            </td>

          <td>
            <td><label style="padding:2%;color: #524A4A;font-size: 11px" >Description:</label></td>
            <td>  <textarea placeholder="Enter Project Description" id="DescriptionID" style="" class="form-control" row=2 name="pdescription" maxlength="250" onkeypress="" <%if(flag==1){%>value="<%=name[0].description%><%}%>"><%if(flag==1){%><%=name[0].description%><%}%></textarea> 
             <div class="fLeft"><span class="error" id="errorDescriptionID"></span></div> 
          </td>
          </td>
             </tr>
          <tr id="pactive" class="hide">
          <td>
            <td  <%if(flag==0 ){%> class="hide"<%}%> ><label style="padding:2%;color: #524A4A;font-size: 11px">Status</label></td>
            <td  <%if(flag==0 ){%> class="hide"<%}%> >
            <input type="radio" name="pstatus"  value= 1  id = "pstatus1" required  style="margin-top:3%" checked="true"> Active
              <input type="radio" name="pstatus"  value= 0  id = "pstatus2" required  style="margin-top:3%;"> Inactive
            </td>
          </td>
         <td>
          <td>
            <td><label ></label></td>
            <td></td>
          </td></td>
        </tr>
        </table> -->
<div class="text-center"><span class="success" id="successProjectAddEdit"></span><span class="error" id="errorProjectAddEdit"></span></div>
<script>
  $("#pclient").val([<%if(flag==1){for(var i=0;i<name.length;i++){%>"<%=name[i].cname%>",<%}}%>]).prop("selected", false);
  $("#ptech").val([<%if(flag==1){for(var i=0;i<name.length;i++){%>"<%=name[i].technologyId%>",<%}}%>]).prop("selected", false);
</script> 
          <center  style="margin-bottom:1% "> 
       
          
         
         
          <input type="submit"  id="createProject" value="Submit"  onclick="validBasicInfo1()" name="submit" class="btn btn-primary " style="background-color: #f05f40;">

          <input type="button"  value="Next"  onclick="validDocInfo(2)" class="btn btn-primary" style="background-color: #f05f40;">
        <input type="button" onclick="closeprojectform()" name="cancel" value="Cancel" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">
           
          </center>
         
      </section>
      <section id="content2">
        <div class="row">
          <div class="hide" id="select1"><button class="btn btn-primary" id="selectAll">Select All</button></div>
          <div class="hide" id="select2"><button class="btn btn-primary"  id="selectNone">Select None</button></div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Actual Start Date :</label>
            <input type="text"  maxlength="20" placeholder="Select Actual Start Date"  class= "form-control input-sm" id="datepicker2" style="" name="asdate" <%if(flag==1){if(name[0].actualStartDate !='00/00/00'){%>value='<%=name[0].actualStartDate%>' <%} else{%> value='' <%}}%> >
          </div>  
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Actual End Date:</label>
            <input type="text"  maxlength="20" placeholder="  Select Actual End Date" class= "form-control input-sm" id="datepicker3" style="" name="aedate"  <%if(flag==1){if(name[0].actualEndDate !='00/00/00'){%>value='<%=name[0].actualEndDate%>' <%} else{%> value='' <%}}%> >
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Commercial Head :</label>
            <select class="form-control input-sm chosen-select1" id="pcommercialhead" name="pcommercialhead" >
                <option   value='0' disabled selected>Select</option>
                <% for(var i=0;i<teamlead.length;i++) {%>
                <option value="<%=teamlead[i].id%>"<%if(flag==1&&name[0].commercialHead==teamlead[i].id){%>selected<%}%> ><%=teamlead[i].name%></option>
                  <%}%> 
              </select>
          </div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Account Lead :</label>
            <select class="form-control input-sm chosen-select1" id="paccounthead" name="paccounthead" >
                <option value='0' selected disabled >Select</option>
                <% for(var i=0;i<teamlead.length;i++) {%>
                <option value="<%=teamlead[i].id%>"<%if(flag==1&&name[0].accountHead==teamlead[i].id){%>selected<%}%> ><%=teamlead[i].name%></option>
                <%}%> </select>
                <div class="fLeft"><span class="error" id="errorPaccounthead"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Manager :</label>
            <select class="form-control input-sm chosen-select1" id ="pmanager" name="pmanager" >
                <option value='0' selected disabled>Select</option>
                <% for(var i=0;i<manager.length;i++) {%>
                <option value="<%=manager[i].id%>"<%if(flag==1&&name[0].manager==manager[i].id){%>selected<%}%> ><%=manager[i].name%></option>
               <%}%>
              </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Is Plan Required:</label>
            <select class="form-control input-sm" id ="planReq" name="planReq" >
                <option value="1" >Yes</option>
                <option selected="selected"  value="0" >No</option>
              </select>
          </div>
        </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Assign to All:</label>
            <select style="" id="assign" class="form-control input-sm" name="assign" onclick="AssigntoAll()">
                
                  <option disabled=""  value="2" >Select</option>
                  <option value="1" >Yes</option>
                  <option value="0" selected  >No</option>
                </select>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6" id="resr">
            <label>Resources:<sup  class="astrick">*</sup></label>
            <div id="presourceDiv">
            <select multiple="multiple" class="form-control input-sm chosen-select1" name="presource" id ="presource" maxlength="50">
                <% for(var i=0;i<resource.length;i++) {%>
                <option value="<%=resource[i].id%>"><%=resource[i].name%></option>
                <%}%>
              </select>
              <%if(flag==1){
                for(var i=0;i<name.length;i++){%>
              
              <%}}%>

              <script type="text/javascript">
                $("#presource").val([<%if(flag==1){for(var i=0;i<name.length;i++){%>"<%=name[i].userId%>",<%}}%>]).prop("selected", false);
                $("#ccontact").val([<%if(flag==1){for(var i=0;i<name.length;i++){ %>"<%=name[i].ccmid%>",<%}}%>]).prop("selected",false);
              </script>
              </div>  
              <div class="fLeft"><span class="error" id="errorPresource"></span></div>
          </div>
        </div>

     <!--   <table class="table">
        <tr>
          <td><td></td><td></td></td>
          <td><td><button class="btn btn-primary" id="selectAll">Select All</button></td><td><button class="btn btn-primary"  id="selectNone">Select None</button></td>
              </td>
        </tr>
          <tr>
            <td>
              <td ><label   style="padding:2%;color: #524A4A;font-size: 11px">Actual Start Date :</label></td>
              <td><input type="text"  maxlength="20" placeholder="Select Actual Start Date"  class= "form-control" id="datepicker2" style="margin-top:2%;background-color:white; background-color: rgb(255, 255, 255);width:100%" name="asdate" <%if(flag==1){if(name[0].actualStartDate !='00/00/00'){%>value='<%=name[0].actualStartDate%>' <%} else{%> value='' <%}}%> >
             </td>
            </td>
            <td>
              <td ><label  style="padding:2%;color: #524A4A;font-size: 11px">Actual End Date :</label></td>
              <td> <input type="text"  maxlength="20" placeholder=" -- Select Actual End Date" class= "form-control" id="datepicker3" style="background-color:white;margin-top:2%; background-color: rgb(255, 255, 255);width:100%" name="aedate"  <%if(flag==1){if(name[0].actualEndDate !='00/00/00'){%>value='<%=name[0].actualEndDate%>' <%} else{%> value='' <%}}%> ></td>
            </td>
            </tr>
          <tr>
            <td>
              <td ><label style="padding:2%;color: #524A4A;font-size: 11px">Comercial Head</label></td>
              <td><select style="width: 100%" class="form-control" id="pcommercialhead" name="pcommercialhead" data-placeholder="Choose Commercial Head" >
                <option   value='0' disabled selected>Select</option>
                <% for(var i=0;i<teamlead.length;i++) {%>
                <option value="<%=teamlead[i].id%>"<%if(flag==1&&name[0].commercialHead==teamlead[i].id){%>selected<%}%> ><%=teamlead[i].name%></option>
                  <%}%> 
              </select> 
             </td>
            </td>
            <td>

             

              <td ><label style="padding:2%;color: #524A4A;font-size: 11px">Resources: <sup class="astrick">*</sup></label></td>
              <td > <div id="presourceDiv"><select multiple="multiple" class="form-text-box" style="margin-top:0%;width:100%;"  name="presource" id ="presource" maxlength="50" data-placeholder="Choose Resource...">
                <% for(var i=0;i<resource.length;i++) {%>
                <option value="<%=resource[i].id%>"><%=resource[i].name%></option>
                <%}%>
              </select>
              <%if(flag==1){for(var i=0;i<name.length;i++){%>
              
              <%}}%>

              <script type="text/javascript">
 
   $("#ccontact").val([<%if(flag==1){for(var i=0;i<name.length;i++){ %>"<%=name[i].ccmid%>",<%}}%>]).prop("selected",false);
</script>  </div>
            <div class="fLeft"><span class="error" id="errorPresource"></span></div>
                      
              </td>
            </td>
          </tr>
          <tr>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Account Lead:</label></td>
              <td> <select class="form-text-box" id="paccounthead" name="paccounthead" style="width: 100%" data-placeholder="Choose Account Lead">
              
                <% for(var i=0;i<teamlead.length;i++) {%>
                <option value="<%=teamlead[i].id%>"<%if(flag==1&&name[0].accountHead==teamlead[i].id){%>selected<%}%> ><%=teamlead[i].name%></option>
        <%}%> </select>
        <div class="fLeft"><span class="error" id="errorPaccounthead"></span></div>
             </td>
            </td>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Manager:</label></td>
              <td> <select class="form-text-box" id ="pmanager" name="pmanager" style="width: 100%" data-placeholder="Choose Manager">
                <option value='0' selected disabled>Select</option>
                <% for(var i=0;i<manager.length;i++) {%>
                <option value="<%=manager[i].id%>"<%if(flag==1&&name[0].manager==manager[i].id){%>selected<%}%> ><%=manager[i].name%></option>
               <%}%>
              </select>
              </td>
            </td>
         </tr>
          <tr>
             <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px">Is Plan Required:</label></td>
              <td> <select style="width:100%" class="form-text-box" id ="planReq" name="planReq" >
                <option value="1" selected>Yes</option>
                <option value="0">No</option>
              </select>
              </td>
            </td>


            <td>
              <td><label class="form-label"></label></td>
              <td></td>
            </td>
          </tr>
          <tr>
            <td></td><td></td><td></td><td></td> 
              <td></td><td></td><td></td><td></td> 
          </tr>
        </table> -->
       
          <center style="margin-bottom: 1%">
         
          
          
          <input type="submit"  id="createProject1" value="Submit"  onclick="validBugInfo1()" name="submit" class="btn btn-primary " style="background-color: #f05f40;">
          <input type="button"  value="Next"  onclick="validDocInfo(5)" class="btn btn-primary" style="background-color: #f05f40;">
          <input type="button" onclick="closeprojectform()" name="cancel" value="Cancel" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">

          </center>
        
      </section>
      <section id="content5">
      <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
             <label>Billable:</label> <br>
            <div>
            <input type="radio"   name="isBillable"  value= 1  id = "isBillable1" required  style="margin-top:3%;"> Yes
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="isBillable"  value= 0  id = "isBillable2" required  style="margin-top:3%;" > No
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
             <label>Project Type:</label>
            <select style="" id="ptype1" class="form-control input-sm" name="ptype">
                  <option disabled selected value=0>Select</option>
              <% for(var i=0;i<allPtype.length;i++) {%>
              <option value="<%=allPtype[i].id%>"><%=allPtype[i].description1%></option>
              <%}%>
            </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Tax Code:</label>
            <input type="text" placeholder="Enter Tax Code"  class= "form-control input-sm" id="taxCode" style="" name="taxCode"  maxlength="20"  <%if(flag==1){%>value='<%=name[0].taxCode%>' <%}%>>
          </div>
      </div>
        <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>PO Number:</label>
            <input type="number" class="form-control input-sm" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength = "10" min = "1" max = "99999" placeholder="  Enter PO Number " id="poNumber" style="" name="poNumber" <%if(flag==1){%>value='<%=name[0].poNumber%>'<%}%> >
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Project Category:</label>
            <select style="" id="pcat" class="form-control input-sm" name="pcat">
                  <option selected disabled value=0>Select</option>
              <% for(var i=0;i<allPcat.length;i++) {%>
              <option value="<%=allPcat[i].id%>"><%=allPcat[i].description1%></option>
              <%}%>
                </select>
          </div>
        </div>
        


       <!-- <table class="table form-table" >
          <tr>
            <td>
              <td><label style="padding:2%;color: #524A4A;font-size: 11px;width:107px">Billable:</label></td>
              <td>
               <input type="radio" name="isBillable"  value= 1  id = "isBillable1" required  style="margin-top:3%;"> Yes
              <input type="radio" name="isBillable"  value= 0  id = "isBillable2" required  style="margin-top:3%;"> No
              </td>
            </td>
            <td>
              <td><label style="padding:4%;color: #524A4A;font-size: 11px;width:107px">Project Type:</label></td>
              <td>
              <select style="width:89%" id="ptype1" class="form-text-box" name="ptype">
                  <option disabled selected value=0>Select</option>
              <% for(var i=0;i<allPtype.length;i++) {%>
              <option value="<%=allPtype[i].id%>"><%=allPtype[i].description1%></option>
              <%}%>
                </select>
              </td>
            </td>
          </tr><tr>
            <td>
              <td><label style="padding:8%;color: #524A4A;font-size: 11px;width:107px;margin-top:-4%">Tax Code:</label></td>
              <td> <input type="text" placeholder="Enter Tax Code"  class= "form-text-box" id="taxCode" style="margin-top:%;" name="taxCode"  maxlength="20"  <%if(flag==1){%>value='<%=name[0].taxCode%>' <%}%>>
              </td>
            </td>
            <td>
              <td><label style="padding:6%;color: #524A4A;font-size: 11px;width:107px">PO Number:</label></td>
              <td style="width: 220px">
              <input type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength = "10" min = "1" max = "99999" placeholder=" -- Enter PO Number -- "class= "form-text-box" id="poNumber" style="margin-top:%;" name="poNumber" <%if(flag==1){%>value='<%=name[0].poNumber%>'<%}%> >
              </td>
            </td>
          </tr> 
          <tr>
            <td>
              <td><label style="padding:4%;color: #524A4A;font-size: 11px;width:107px">Project Category:</label></td>
              <td>
              <select style="width:89%" id="pcat" class="form-text-box" name="pcat">
                  <option selected disabled value=0>Select</option>
              <% for(var i=0;i<allPcat.length;i++) {%>
              <option value="<%=allPcat[i].id%>"><%=allPcat[i].description1%></option>
              <%}%>
                </select>
              </td>
            </td>
          </tr>
          <tr>
            <td></td><td></td><td></td><td></td> 
           <td></td><td></td><td></td><td></td>
              
          </tr>
        </table>-->

            <center style="padding-bottom: 1%">  
            <input type="submit"  id="createProject2" value="Submit"  onclick="validFinanceInfo1()" name="submit" class="btn btn-primary projbuton" style="background-color: #f05f40;">
             <input type="button" onclick="closeprojectform()" name="cancel" value="Cancel" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">       
             </center>

      
        </section>
      </main>
      </form>
    </div>
</div>
<!--end project data-->
<!--addWBS-->
<div id="addwbs" class="col-md-8 hide" style="float:right;margin-top: -655px ; overflow: auto;height:654px">
 <div id="ModalAdd"></div> 
      <div id="ModalAddMesage"></div>


  <span class="modal-title" style="padding-left:45%">WBS Details</span>
  <div class="row" style="padding-left:0px;padding-right:0px;padding-top: 1%">

  <input type="text" name="wbshidden" class="hide" id="wbshidden" value='' />
  <input type="text" name="flaghide" class="hide" id="flaghide" <%if(flag==1 ){ console.log( 'Nae is ', name)%>value='  <%=flag%>' <%} else{%> value=0 <%}%> />
    <input type="text" name="wbsidhide" class="hide" id="idhide" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].WBSId%>' <%} else{%> value=0 <%}%> />

     <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Project Name:<sup  class="astrick">*</sup></label>
            <input type="hidden" class="form-control input-sm" style="" name="proname" id="proname" maxlength="50" value='' disabled="true">
            <input type="text" class="form-control input-sm " style="" name="pronameid" id="pronameid" maxlength="50" value='' disabled="true">
              <div class="fLeft"><span class="error" id="errorProname"></span></div> 
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>WBS Name:<sup  class="astrick">*</sup></label>
            <input onblur="return allWbs();" onkeypress="return specialCharacter(event)" type="text" placeholder="Enter a WBS Name" class="  form-control input-sm" style="" name="wbsname" id="wbsname" maxlength="50" onblur="myFunction(); checkprofield();" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].WBSName%>' <%}%> >
            <div class="fLeft"><span class="error" id="errorWbsname"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>WBS Code:</label>
            <input type="text" placeholder="WBS Code" class="form-control input-sm" style="" name="wbscode" id="wbscode" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].WBSCode%>' <%}%> readonly>
          </div>
     </div> 
     <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>WBS Owner:</label>
            <select style="" class="form-control input-sm" id="wbsowner" name="wbsowner">
                 <option disabled selected value=0>Select</option>
                <% for(var i=0;i<resource.length;i++) {%>
                <option value="<%=resource[i].id%>"><%=resource[i].name%></option>
                <%}%>
            </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Planned Start Date:<sup  class="astrick">*</sup></label>
            <input type="text" maxlength="20" placeholder="Select Date" class="form-control input-sm"  id="datepickerw" style="background-color: rgb(255, 255, 255);" name="wbspsdate" <%if(flag==1 && typeof (name[0][0]) !='undefined'){%>value='<%=name[0][0].wplannedStartDate%>' <%}%> > 
             <div class="fLeft"><span class="error" id="errorWbspsdate"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Planned End Date:<sup  class="astrick">*</sup></label>
            <input type="text" maxlength="20" placeholder="Select Date" name="wbspedate"  class="form-control input-sm" id="datepickerw1" style="background-color: rgb(255, 255, 255);" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value='<%=name[0][0].wplannedEndDate%>' <%}%> >
            <div class="fLeft"><span class="error" id="errorWbspedate"></span></div>
          </div>
    </div>   
    <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Actual Start Date:</label>
            <input type="text" maxlength="20" class="form-control input-sm" id="datepickerw2" placeholder="Select Date"  style="background-color: rgb(255, 255, 255);" name="wbsasdate" <%if(flag==1 && typeof (name[0][0]) !='undefined'  && name[0][0].wactualStartDate){ if(name[0][0].wactualStartDate != '00/00/00'){%>value='<%=name[0][0].wactualStartDate%>' <%} else{%> value='' <%}}%>   > 
            <div class="fLeft"><span class="error" id="errorDatepicker2"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Actual End Date:</label>
            <input type="text" maxlength="20" placeholder="Select Date" class="form-control input-sm" id="datepickerw3"  style="background-color: rgb(255, 255, 255);" name="wbsaedate" <%if(flag==1 && typeof (name[0][0]) !='undefined'  && name[0][0].wactualEndDate){ if(name[0][0].wactualEndDate != '00/00/00'){%>value='<%=name[0][0].wactualEndDate%>' <%} else{%> value='' <%}}%>  >
            <div class="fLeft"><span class="error" id="errordatepicker3"></span></div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Estimate Effort:</label>
            <input type="number" style="" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="10" placeholder="Effort" class="form-control input-sm"   name="wbseffort" id="wbseffort" maxlength="5" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].estimateEffort%>' <%}%> >

            <select style="" id="wbseffort1" class="form-control input-sm" name="wbseffort1">
                            <option disabled selected   value=0>Select</option>
                            <option value=1>Man-Hours</option>
                            <option value=2>Man-Days</option>
                            <option value=3>Man-Weeks</option>
                            <option value=4>Man-Months</option>
            </select>
            <div class="fLeft"><span class="error" id="errorWbseffort1"></span></div>
          </div>
    </div> 
    <div class="row fusion-form-elements">
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>WBS Location:</label>
            <select   class="form-control input-sm" id="wbslocation" name="wbslocation">
                   <option disabled selected value=0>Select</option> 

                   <% for(var i=0;i<location.length;i++) {%> <option value="<%=location[i].id%>" <%if(flag==1&&location[i].id==name[0][0].WBSLocation) {%>selected<%}%>><%=location[i].location%></option> <%}%> 

            </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Assign to All:</label>
            <select style="" id="assign" class="form-control input-sm" name="assign">
                  <option  disabled selected  value=2>Select</option>
                  <option value=1>Yes</option>
                  <option value=0  selected="true">No</option>
            </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Type :</label>
            <select style="" id="typeValue" class="form-control input-sm" name="typeValue">
                <option disabled selected   value=0>Select</option>
                <option value=1>Time only</option>
                <option value=2>Time & Expense</option>
              </select>
          </div>
    </div>
    <div class="row fusion-form-elements">
                    <div class="col-lg-4 col-md-4 col-sm-6" id="wbsstatus"<%if(flag==0 ){%> style="display:none"<%}%> >
            <label>Status:</label>
              <input type="radio" class="" name="wbsstatus" value=1 id="wbsstatus1" style="margin-top:10px;"> Active 
              <input type="radio" class="" name="wbsstatus" value=0 id="wbsstatus2" style="margin-top:10px;"> Inactive
          </div>
    </div>  
      
    <!--<table class="table"  style="width: 100%;margin-bottom: 0px" >
      <tr>
        <td>
          <td>
            <label class="form-Label">Project Name:<sup>*</sup>    </label>
           </td>
           <td style="width:240px">
            
              <input type="hidden" class="form-control form-text-box" style="" name="proname" id="proname" maxlength="50" value='' disabled="true">
               <input type="text" class="form-control form-text-box" style="" name="pronameid" id="pronameid" maxlength="50" value='' disabled="true">
             
              <div class="fLeft"><span class="error" id="errorProname"></span></div>
          </td>
          </td>
          <td>
            <td>
            <label class="form-Label">WBS Name :<sup>*</sup></label>
            </td>
            <td>
            <input onblur="return allWbs();" onkeypress="return specialCharacter(event)" type="text" placeholder="Enter a WBS Name" class="  form-text-box" style="" name="wbsname" id="wbsname" maxlength="50" onblur="myFunction(); checkprofield();" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].WBSName%>' <%}%> >
            <div class="fLeft"><span class="error" id="errorWbsname"></span></div>
          </td>
        </td>
        </tr><tr>
        <td>
          <td>
          <label class="form-Label">WBS Code :   </label>
          </td>
           <td>
              <input type="text" placeholder="WBS Code" class=" form-text-box" style="" name="wbscode" id="wbscode" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].WBSCode%>' <%}%> readonly>
          </td>
        </td>
        <td>
        <td>
          <label class="form-Label">WBS Owner:   </label>
          </td>
           <td>
          <select style="" class="form-text-box" id="wbsowner" name="wbsowner">
          <option disabled selected value=0>Select</option>
             <%for(var i=0;i<resource.length;i++){%>
                                            <option value="<%=resource[i].id%>" ><%=resource[i].name%>
                                            </option>
                                            <%}%>
              </select>
        </td>
        </td>
      </tr>
      <tr>
        <td>
          <td>
             <label class="form-Label">Planned Start Date: <sup>*</sup> </label>
           </td>
           <td>
             <input type="text" maxlength="20" placeholder="Select Date" class="form-text-box"  id="datepickerw" style="background-color: rgb(255, 255, 255);" name="wbspsdate" <%if(flag==1 && typeof (name[0][0]) !='undefined'){%>value='<%=name[0][0].wplannedStartDate%>' <%}%> >
             <div class="fLeft"><span class="error" id="errorWbspsdate"></span></div> 
          </td>
          </td>
          <td>
            <td>
              <label class="form-Label">Planned End Date: <sup>*</sup> </label>
            </td>
            <td>
            <input type="text" maxlength="20" placeholder="Select Date" name="wbspedate"  class="form-text-box" id="datepickerw1" style="background-color: rgb(255, 255, 255);" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value='<%=name[0][0].wplannedEndDate%>' <%}%> >
            <div class="fLeft"><span class="error" id="errorWbspedate"></span></div> 
          </td>
        </td>
        </tr><tr>
        <td>
          <td>
            <label class="form-Label">Actual Start Date:   </label>
          </td>
           <td>
          <input type="text" maxlength="20" class="form-text-box" id="datepickerw2" placeholder="Select Date"  style="background-color: rgb(255, 255, 255);" name="wbsasdate" <%if(flag==1 && typeof (name[0][0]) !='undefined'  && name[0][0].wactualStartDate){ if(name[0][0].wactualStartDate != '00/00/00'){%>value='<%=name[0][0].wactualStartDate%>' <%} else{%> value='' <%}}%>   > 
           <div class="fLeft"><span class="error" id="errorDatepicker2"></span></div> 
          </td>
        </td>
        <td>
          <td>
           <label class="form-Label">Actual End Date:   </label>
          </td>
           <td>
           <input type="text" maxlength="20" placeholder="Select Date" class="form-text-box" id="datepickerw3"  style="background-color: rgb(255, 255, 255);" name="wbsaedate" <%if(flag==1 && typeof (name[0][0]) !='undefined'  && name[0][0].wactualEndDate){ if(name[0][0].wactualEndDate != '00/00/00'){%>value='<%=name[0][0].wactualEndDate%>' <%} else{%> value='' <%}}%>  >
           <div class="fLeft"><span class="error" id="errordatepicker3"></span></div> 
        </td>
        </td>
      </tr>
      <tr>
        <td>
          <td>
             <label class="form-Label">Estimate Effort:</label> 
           </td>
           <td>
             <input type="number" style="width:44%;display:inline" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="10" placeholder="Effort" class="form-text-box"   name="wbseffort" id="wbseffort" maxlength="5" <%if(flag==1 && typeof (name[0][0]) !='undefined' ){%>value=' <%=name[0][0].estimateEffort%>' <%}%> >

             <select style="width:47%;float:right;margin-right:9%;padding:0px" id="wbseffort1" class="form-text-box" name="wbseffort1">
                            <option disabled selected   value=0>Select</option>
                            <option value=1>Man-Hours</option>
                            <option value=2>Man-Days</option>
                            <option value=3>Man-Weeks</option>
                            <option value=4>Man-Months</option>
                       </select>
            <div class="fLeft"><span class="error" id="errorWbseffort1"></span></div> 

          </td></td>
          <td>
            <td>
              <label class="form-Label">WBS Location: </label> 
            </td>
            <td>
           <select   class="form-text-box" id="wbslocation" name="wbslocation">
                   <option disabled selected value=0>Select</option> 

                   <% for(var i=0;i<location.length;i++) {%> <option value="<%=location[i].id%>" <%if(flag==1&&location[i].id==name[0][0].WBSLocation) {%>selected<%}%>><%=location[i].location%></option> <%}%> 

            </select>
          </td>
        </td>
        </tr><tr>
        <td>
          <td>
            <label class="form-Label">Assign to All:   </label> 
          </td>
           <td>
             <select style="" id="assign" class="form-text-box" name="assign">
                  <option  disabled selected  value=2>Select</option>
                  <option value=1>Yes</option>
                  <option value=0  selected="true">No</option>
                </select>
          </td>
        </td>
        <td>
          <td>
           <label class="form-Label">Type :</label>
          </td>
           <td>
          
            <div style="width: 108%;float: left;padding-right: 14px">
              <select style="" id="typeValue" class="form-text-box" name="typeValue">
                <option disabled selected   value=0>Select</option>
                <option value=1>Time only</option>
                <option value=2>Time & Expence</option>
              </select>
            </div>
        </td>
        </td>
      </tr>
      <tr id="wbsstatus" class="hide">
        <td >
          <td <%if(flag==0 ){%> class="hide"<%}%> ><label class="form-Label " style="padding-top: 13px">Status :</label></td>
          <td  <%if(flag==0 ){%> class="hide"<%}%> >
              <input type="radio" class="" name="wbsstatus" value=1 id="wbsstatus1" style="margin-top:10px;"> Active 
              <input type="radio" class="" name="wbsstatus" value=0 id="wbsstatus2" style="margin-top:10px;"> Inactive
          </td>
        </td>
        
        
         
      </tr>
    </table> -->
    <div class="text-center"><span class="success" id="successWbsDetails"></span></div>
     <div class="row " style="padding-bottom:20px;">
        <center> 
           
                

            <input id="wbsbuton" type="submit" value="Submit" onclick="return checkfield();" name="submit" class="btn btn-primary document.getElementById("wbsbuton1").disabled = true;">
            <input type="button" name="cancel" onclick="closewbsform()" value="Cancel" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">
        </center>
    </div>  
   
            <div class="hide" id="asstable">
            <span class="modal-title" style="padding-left:42%">Assignment Details</span>
           
            <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="ashomeTable">

            </table>
            </div>
              <div class="hide" id="wbshtable">
              <span class="modal-title" style="padding-left:44%">WBS Details</span>
            <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="wshomeTable">

            </table>
            </div>
  </div>

</div>

<!--endWBS-->
<!--client add-->

 <div id="addclient" class="col-md-8 hide" style="float:right;margin-top: -655px; overflow: auto;height:654px ">
       
                    <span class="modal-title" style="padding-left:45%">Client Details</span>
                           
                 
                <input type="text" class="hide" id='hiddenid' name="hiddenid" value="0" > 
                    <input type="text" class="hide" id='hiddeneditflag' name="hiddeneditflag">

    <div class="row fusion-form-elements">
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Client Name:<sup  class="astrick">*</sup></label>
          <input type="text" maxlength="40"  onkeypress="return specialCharacter(event)" 
            class="form-control input-sm" id="cname" name="cname" placeholder="Name" />
            <div class="fLeft"><span class="error" id="errorCname"></span></div>
      </div>      
      <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Client Abbreviate Name:<sup  class="astrick">*</sup></label>
            <input type="text"   onkeypress="return specialCharacter(event)"  maxlength="45" class="form-control input-sm" id="cabbname" name="cabbname" placeholder="Abbrivated Name"/>
            <div class="fLeft"><span class="error" id="errorCabbname"></span></div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Category</label>
        <select  class="form-control input-sm" name="category" id="category" maxlength="50" onchange="" ;>
          <option value="Silver">Silver</option>
          <option value="Gold">Gold</option>
           <option value="Diamond">Diamond</option>
            </select>
            <div class="fLeft"><span class="error" id="errorCategory"></span></div>
      </div>
    </div> 
    <div class="row fusion-form-elements">
      <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Account Lead:</label>
            <span id="errmsg" style="color:red"></span>
        <select name="cal" id="cal" class="form-control input-sm chosen-select"  >
        <option value="0">Select</option>
            <%for(var i=0;i<resource.length;i++){%>
              <option value="<%=resource[i].id%>" ><%=resource[i].name%>
              </option>
            <%}%>
        </select>
          <div class="fLeft"><span class="error" id="errorCal"></span></div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Client Code:</label>
          <input type="text"   maxlength="45" class="form-control input-sm" id="ccode" name="ccode" placeholder="auto generated" readonly/>
          <div class="fLeft"><span class="error" id="errorCcode"></span></div>
      </div>      
      <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Location:</label>
        <select name="clocation" class="form-control input-sm chosen-select" id="clocation"  >
          <option value="0">--Select--</option>
          <%for(var i=0;i<location.length;i++){%>
          <option value="<%=location[i].id%>" ><%=location[i].location%>
          </option>
           <%}%>
        </select>
            <div class="fLeft"><span class="error" id="errorLocation"></span></div>
      </div>
    </div>
    <div class="row fusion-form-elements">
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Address:</label>
           <textarea type="" placeholder="Client Address"   maxlength="300" height="103" class="form-control input-sm" id="caddress" name="caddress"> 
           </textarea>
                <div class="fLeft"><span class="error" id="errorAddress"></span>
                </div>
      </div> 
    </div>       
    
              
 <!-- <table class="table" style="margin-top: 1%">
        
    <tr>
        <td>
            <td  ><label class="form-Label">Client Name:</label><sup>*</sup> </td>
            <td>
            <input type="text" maxlength="40"  onkeypress="return specialCharacter(event)" 
            class="form-text-box " id="cname" name="cname" placeholder="Name"/>
            <div class="fLeft"><span class="error" id="errorCname"></span></div>
            </td>
        </td>
        <td>
            <td><label class="form-Label">Client Abbriviate Name:<sup>*</sup> </label></td>
            <td><input type="text"   onkeypress="return specialCharacter(event)"  maxlength="45" class="form-text-box" id="cabbname" name="cabbname" placeholder="Abbrivated Name"   />
            <div class="fLeft"><span class="error" id="errorCabbname"></span></div>
            </td>
        </td>
        </tr><tr>
        <td>
            <td><label class="form-Label">Category:</label></td>
            <td>
            <select  class="form-text-box" name="category" id="category" maxlength="50" onchange="" ;>
          <option value="Silver">Silver</option>
          <option value="Gold">Gold</option>
           <option value="Diamond">Diamond</option>
            </select>
            <div class="fLeft"><span class="error" id="errorCategory"></span></div>
    </td>
        </td>
        <td>
            <td><label class="form-Label">Account Lead:</label></td>
            <td><span id="errmsg" style="color:red"></span>
                                        <select name="cal" id="cal" class="form-text-box"  >
                                            <option value="0">--Select--</option>
                                            <%for(var i=0;i<resource.length;i++){%>
                                            <option value="<%=resource[i].id%>" ><%=resource[i].name%>
                                            </option>
                                            <%}%>
                                        </select>
            <div class="fLeft"><span class="error" id="errorCal"></span></div>                                        
            </td>
        </td>

    </tr>

    <tr>
        <td>
            <td><label class="form-Label">Client Code:</label></td>
            <td><input type="text"   maxlength="45" class="form-text-box" id="ccode" name="ccode" placeholder="auto generated"  readonly /> <div class="fLeft"><span class="error" id="errorCcode"></span></div></td>
        </td>
        <td>
            <td><label class="form-Label">Location:</label></td>
            <td> <select name="clocation" class="form-text-box" id="clocation"  >
                                            <option value="0">--Select--</option>
                                            <%for(var i=0;i<location.length;i++){%>
                                            <option value="<%=location[i].id%>"> <%=location[i].location%>
                                            </option>
                                            <%}%>
                                        </select>
            <div class="fLeft"><span class="error" id="errorLocation"></span></div>                            
            </td>
        </td>
        </tr><tr>
        <td>
            <td><label class="form-Label">Address:</label></td>
            <td><textarea type="" placeholder="Client Address"   maxlength="300" height="103" style="resize:none;height: 66px" class="form-text-box" id="caddress" name="caddress"> </textarea>
                <div class="fLeft"><span class="error" id="errorAddress"></span></div>
            </td>
        </td>
        <td>
            <td><label class="form-Label"></label></td>
            <td></td>
        </td>
       
    </tr>   
    
</table>      -->    
 <div class="text-center"><span class="error" id="errorCreateClient"></span><span class="success" id="successCreateClient"></span></div>
                                <center style="padding-bottom: 0%;" >
                                   
                                  
                                 
                                  <button id="addclientbutton" class="btn btn-primary " onclick="addclient()"  style="background-color: #f05f40;">Submit</button> 
                                 <span id="createclientcontect"></span>
                                 <input type="button" name="cancel" value="Cancel" onclick="closelientform();" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">
                                </center>
             
     
    
     
          <span class="modal-title" style="padding-left:40%;margin-top:10px;font-size: 12px">List of Client Contact Persons</span>
         

             <table id="client-contact-table" class="table stripe cell-border hover">  
                 <thead>
                    <tr>                                         
                        <th>Contact Person</th>
                        <th>Contact Person Email</th>
                        <th>Contact Phone</th>
                         <th>Client Name</th>
                        <th>Client Code</th>  
                        <th>Action</th>

                    </tr>
                </thead> 
                <tbody id="client-contact-body">
              
                </tbody>
            </table>

    </div>
  
<!--client end-->
<!--assignment add-->
<div id="aa" class="col-md-8 hide" style="float:right;margin-top: -655px " >
 
<form id="addassignform"  method="post" onsubmit="" name="client" >
                          <input type="hidden" name="flag" id="flagid" value="0">
                          <input type="hidden" name="assignmentId" id="assignmentId" value="0">
                            <input type="hidden" name="ascode" id="ascodeid" value=''> 
                            
   <span class="modal-title" style="padding-left: 44%;padding-bottom: 1%"> Assignment Details</span>  
    <input type="hidden" value=""id='pcount'name='pcount'> 
    <div class="row fusion-form-elements">
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>Project Name:<sup  class="astrick">*</sup></label>
          <input type="hidden" class="form-control input-sm" value="" id='procode'name='pclient' disabled="disable"> 
          <input type="text" class="form-control input-sm" value="" id='aprocode'name='apclient' disabled="disable">
        <div class="fLeft"><span class="error" id="errorProcode"></span></div>
      </div>      
      <div class="col-lg-4 col-md-4 col-sm-6">
            <label>WBS Name:<sup  class="astrick">*</sup></label>
            <div id="wbsDiv"> 
             <input type="hidden" class="form-control input-sm" value=""id='wbs2'name='wbs2' disabled="disable">
            <input type="text" class="form-control input-sm" value=""id='awbs2'name='awbs2' disabled="disable"> 
            </div>
          <div class="fLeft"><span class="error" id="errorWbs2"></span></div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>User:<sup  class="astrick">*</sup></label>
         <div id="asdDiv"> 
           <select class="form-control input-sm chosen-select" name="asd" id="asd" multiple="multiple" style="" data-placeholder="choose users"> 
            </select>
         </div>
        <input type="text" id="auser" class="form-control hide" disabled="disable">
        <div class="fLeft"><span class="error" id="errorAsd"></span></div>
      </div> 
    </div> 
    
    <div class="row fusion-form-elements">     
      <div class="col-lg-4 col-md-4 col-sm-6">
            <label>Start Date:<sup  class="astrick">*</sup></label>
             <input type="text"  name="Edate" class="form-control input-sm datepicker" placeholder="choose a date"  id="asdatepicker" style=" cursor: pointer; " onClick="" readonly="true" >
          <div class="fLeft"><span class="error" id="errorDatepicker"></span></div>   
      </div>
      <div class="col-lg-4 col-md-4 col-sm-6">
          <label>End Date:<sup  class="astrick">*</sup></label>
         <input type="text"  name="Edate" class="form-control input-sm datepicker" placeholder="choose a date" id="asdatepicker1" style=" cursor: pointer;  " 
           onClick="" readonly="true" >
          <div class="fLeft"><span class="error" id="errorDatepicker1"></span></div> 
      </div> 
            <div class="col-lg-4 col-md-4 col-sm-6 assignmentstatus" <%if(flag==0 ){%> style="display:none"<%}%>>
        <label>Status:<sup class="astrick">*</sup></label>
          <div class="radio assignmentstatus" id="rad">
            <input type="hidden" id="act" >
             <label style="margin-right:9px"><input type="radio" style="margin-top:0px"   name="status" id="active" value='1' checked >Active</label>
            <label><input type="radio" style="margin-top:0px" name="status" id="inactive" value='0' >InActive</label> 
          </div>
      </div>
    </div> 
      
     
      
      
   <!-- <table class="table">
  <tr>
    <td>
      <td><label class="form-label" style="margin-top: 2%;">Project Name:<sup class="astrick">*</sup></label></td>
      <td>
      <input type="hidden" class="form-text-box" value="" id='procode'name='pclient' disabled="disable"> 
      <input type="text" class="form-text-box" value="" id='aprocode'name='apclient' disabled="disable">
        <div class="fLeft"><span class="error" id="errorProcode"></span></div>
      </td>
    </td>
    <td>
      <td><label class="form-label" style="margin-top: 2%;">WBS Name:<sup class="astrick">*</sup></label></td>
      <td>
        <div id="wbsDiv"> 
        <input type="hidden" class="form-text-box" value=""id='wbs2'name='wbs2' disabled="disable">
        <input type="text" class="form-text-box" value=""id='awbs2'name='awbs2' disabled="disable"> 
     
      </div>
      <div class="fLeft"><span class="error" id="errorWbs2"></span></div>
    </td>
    </td></tr><tr>
    <td>
      <td><label class="form-label" style="margin-top: 2%;">User:<sup class="astrick">*</sup></label></td>
      <td>
       <div id="asdDiv"> 
       <select class="form-text-box" name="asd" id="asd" multiple="multiple" style="height:15px !important;width:90%" data-placeholder="choose users"> 
       
       </select>
     </div>
     <input type="text" id="auser" class="form-text-box hide" disabled="disable">
       <div class="fLeft"><span class="error" id="errorAsd"></span></div>
        </td>
    </td>
      <td>
      <td><label class="form-label">Start Date:<sup class="astrick">*</sup></label></td>
      <td>
         <input type="text"  name="Edate" class="form-text-box datepicker" placeholder="choose a date"  id="asdatepicker" style=" cursor: pointer; " onClick="" readonly="true" >
       <div class="fLeft"><span class="error" id="errorDatepicker"></span></div>         
          
      </td>
    </td>
  
  </tr>
  <tr>
  
    <td>
      <td><label class="form-label">End Date:<sup class="astrick">*</sup></label></td>
      <td> 
      <input type="text"  name="Edate" class="form-text-box datepicker" placeholder="choose a date" id="asdatepicker1" style=" cursor: pointer;  " onClick="" readonly="true" >
      <div class="fLeft"><span class="error" id="errorDatepicker1"></span></div>       
      </td>
    </td>
     <td class="assignmentstatus">
      <td  class="assignmentstatus" ><label class="form-label" style="margin-top:8px">Status:</label></td>
      <td class="assignmentstatus" >
       <div  class="radio assignmentstatus" id="rad">
              <input type="hidden" id="act" >
                <label style="margin-right:9px"><input type="radio" style="margin-top:0px"   name="status" id="active" value='1' checked >Active</label>
                <label><input type="radio" style="margin-top:0px" name="status" id="inactive" value='0' >InActive</label> 
              </div>

       </td>
   </td>
    <td>
      <td><label class="form-label"></label></td>
      <td></td>
    </td>
   <td></td>
  </tr> 
</table>-->
 <div class="text-center"><span class="success" id="successCreateAssignment"></span><span class="error" id="errorCreateAssignment"></span></div>
       <center style="margin-bottom:1%"> 
          
          <input type="button" value="Submit" onclick="submitdata();" id="assignbutton" name="submit" class="btn btn-primary" style="background-color: #f05f40;">
          <input type="button" onclick="cancelassign()" name="cancel" value="Cancel" form="cancelform" class="btn btn-primary" style="background-color: #f05f40">
 
        </center>
        
    </form>
    </div>
  
<!--client end-->
<!--description-->
 <div id="showallclient" class="col-md-8 hide" style="float:right;margin-top: -655px ">
        <div style="margin-left: 10px;margin-right: 10px">
        <div class="row">
        <label id="alldetails" style="width: 17%;margin-top: 10px;margin-bottom: 10px;color:#f04050;margin-left: 350px;"></label></div>
        <label id="totalclient" style="width: 13%;font-size:10px;margin-top: 10px;margin-bottom: 10px;color:#f04050;">Total Clients</label>
        <label id="totalno" style="width: 24%;font-size:10px;margin-top: 10px;margin-bottom: 10px;color:black;">10</label>
          <label id="booktime" style="width: 17%;font-size:10px;margin-top: 10px;margin-bottom: 10px;color:#f04050;">Total Time Booked :</label>
        <label id="totaltime" style="width: 10%;font-size:10px;margin-top: 10px;margin-bottom: 10px;color:black;">100000</label> 
            <input class="form-text-box" type="text" placeholder="search in this table" id="searchboxhome" style="float:right;width: 25%;margin-top: 10px;margin-bottom: 10px">
            <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="homeTable">

            </table>
        </div>
    </div>
    <!--description-->

    <!--client contect-->


<!--model-->
  <div class="modal fade" id="myModal" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:40%">
    
      <!-- Modal content-->
      <div class="modal-content" id="projectDetailModal">
        <div class="modal-header">
         <h4 class="modal-title">Add/Edit client contact person</h4>
        </div>
        <div class="col-sm-12 height11"></div>
<div>
            <div class="col-sm-12">          
            <label class="form-label">Name:</label><sup class="astrick">*</sup>
            <input type="text" maxlength="40" class="form-text-box clearAll " id="coname" autofocus tabindex="1"/>
            <div class="fLeft"><span class="error" id="errorConame"></span></div>
            </div>

            <div class="col-sm-12 height11"></div>
            <div class="col-sm-12">         
            <label class="form-label">Emailid:</label><sup class="astrick">*</sup>
            <input type="text" maxlength="40" class="form-text-box clearAll" id="cemail" tabindex="2"/>
            <div class="fLeft"><span class="error" id="errorCemail"></span></div>
            </div>
            <div class="col-sm-12 height11"></div>
            <div class="col-sm-12">         
            <label class="form-label">Contact Number:</label><sup class="astrick">*</sup>
            <input  type="number"  maxlength = "10" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" class="form-text-box clearAll" id="cocontact"  tabindex="3"/>
            <div class="fLeft"><span class="error" id="errorCocontact"></span></div>
            </div>
            <input type="text" maxlength="40" class="form-text-box clearAll hide" id="cclientid" required />
            <input type="text" maxlength="40" class="form-text-box clearAll hide" id="cflag"/>
</div>
<div class="col-sm-12">        
<div class="text-center"><span class="success" id="successMyModal"></span><span class="error" id="errorMyModal"></span></div>
</div>        
<div class="col-sm-12 height11"></div>
<div class="modal-footer center">
        
        <button type="button" class="btn " id="createSaveBtn" onclick="createEditContact()" tabindex="5">Save</button>
        <button type="button" class="btn" data-dismiss="modal" id="createCancelBtn" onclick="resetError();" tabindex="6">Close</button>
        <div class="col-sm-12 height11"></div>
</div>

      </div>
      
    </div>
  </div>
 <footer>
        <% include ./partials/footer %>
    </footer>
</body>

</html>


